(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ffc796d8"],{1732:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"qad__wrapper"},[a("el-card",{staticClass:"question",attrs:{shadow:"always"}},[a("el-row",{staticClass:"question__main",attrs:{type:"flex",justify:"space-between"}},[a("el-card",{staticClass:"user-info",attrs:{shadow:"never"}},[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("a",{staticClass:"user-avatar",style:{backgroundImage:"url("+t.question.questionerAvatar+")"},attrs:{href:"javascript:void(0);"}}),a("div",{staticClass:"question-meta__wrapper"},[a("el-link",{staticClass:"user-name",attrs:{type:"primary",href:"javascript:void(0);"}},[t._v(t._s(t.question.questionerName))]),a("div",{staticClass:"question-created normal-info-font"},[t._v("\n              "+t._s(t.question.created)+"\n            ")])],1)]),t.question.questionerFaculty?a("p",[t._v("\n          "+t._s(t.question.questionerFaculty)+"\n        ")]):t._e(),t.question.questionerMajor?a("p",[t._v("\n          "+t._s(t.question.questionerMajor)+"\n        ")]):t._e(),a("p",[t._v(t._s(t.question.questionerType))])],1),a("el-col",{attrs:{span:19}},[a("div",{staticClass:"question__desc"},[a("div",{staticClass:"question__title"},[a("h1",[t._v(t._s(t.question.title))])]),a("div",{staticClass:"question__content ck-content",domProps:{innerHTML:t._s(t.question.content)}})])])],1),a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{staticClass:"normal-info-font",attrs:{span:3}},[t._v("\n        "+t._s(t.question.replysLength)+" 个回答\n      ")]),a("el-col",{attrs:{span:6}},t._l(t.question.tags,(function(e){return a("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return t.handleClose(e)}}},[t._v("\n          "+t._s(e)+"\n        ")])})),1)],1)],1),t._l(t.question.replys,(function(e,s){return a("el-card",{key:s,staticClass:"reply",attrs:{shadow:"always"}},[a("el-row",{staticClass:"reply__main",attrs:{type:"flex",justify:"space-between"}},[a("el-card",{staticClass:"user-info",attrs:{shadow:"never"}},[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("a",{staticClass:"user-avatar",style:{backgroundImage:"url("+e.replyerAvatar+")"},attrs:{href:"/myInfo"}}),a("div",{staticClass:"question-meta__wrapper"},[a("el-link",{staticClass:"user-name",attrs:{type:"primary",href:"/myInfo"}},[t._v(t._s(e.replyerName))]),a("div",{staticClass:"reply-created normal-info-font"},[t._v("\n              "+t._s(e.created)+"\n            ")])],1)])],1),a("el-col",{attrs:{span:19}},[a("div",{staticClass:"reply__desc"},[a("div",{staticClass:"reply__content ck ck-content",domProps:{innerHTML:t._s(e.content)}})])])],1)],1)})),a("el-row",[a("el-col",[a("p")])],1),t.question.replys.length?a("el-row",{staticClass:"replylist-index"},[a("el-col",[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":this.offset,layout:"prev, pager, next, jumper",total:t.totalItems,background:""},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.handleCurPageChange}})],1)],1):t._e(),a("RichInput",{attrs:{question:t.reply,disabled:!t.user.id,uploadImageUrl:t.$serverBaseUrl+"/api/uploadQaImage?replyerID="+t.user.id,mode:"answering"},on:{"update:question":function(e){t.reply=e},upload:t.upload}})],2)},n=[],r=(a("ac4d"),a("8a81"),a("ac6a"),a("bd86")),i=a("d692"),o={props:{user:{type:Object}},data:function(){return Object(r["a"])({currentPage:1,question:{replys:[]},reply:{content:""},index:0,offset:8},"currentPage",1)},computed:{totalItems:function(){return this.question.replys.length},currentPageReplysCount:function(){return this.question.replys.slice(this.index,this.index+this.offset)}},methods:{handleCurPageChange:function(t){this.index=(t-1)*this.offset},getQaQuestion:function(){var t=this,e="/api/getQaQuestion",a=this.$route.params.question_id;this.$http.post(e,{qaID:a}).then((function(e){if(1===e.data.code){t.question=e.data.data,t.question.created=t.$dayjs(t.question.created).format("YYYY-MM-D");var a=t.question.replys,s=!0,n=!1,r=void 0;try{for(var i,o=a[Symbol.iterator]();!(s=(i=o.next()).done);s=!0){var l=i.value;l.created=t.$dayjs(l.created).format("YYYY-MM-DD")}}catch(c){n=!0,r=c}finally{try{s||null==o.return||o.return()}finally{if(n)throw r}}}else t.$message.error("问题加载失败！"),t.$router.push({path:"/qa"})})).catch((function(e){console.log(e),t.$message.error("问题加载失败"),t.$router.push({path:"/qa"})}))},beforeUploadReply:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{content:"答案内容"},e=this.reply;for(var a in t)if(""===e[a])return this.emptyUploadToast(t[a]),!1;return!0},emptyUploadToast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"内容";this.$message.error("".concat(t,"不能为空！"))},uploadReply:function(){var t=this;this.$confirm("是否确认提交回答?","确认提交",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e="/api/updateQuestionReplys";t.$http.post(e,{qaID:t.question.qaID,reply:{replyerName:t.user.username,replyerType:t.user.usertype,replyerAvatar:t.user.avatar,content:t.reply.content}}).then((function(e){1===e.data.code?(t.$message({message:"提交成功！",type:"success"}),t.getQaQuestion()):t.$message.error("提交失败！")})).catch((function(e){t.$message.error("提交失败！"),console.log(e)}))})).catch((function(t){console.log(t)}))},upload:function(){this.beforeUploadReply()&&this.uploadReply()}},created:function(){this.getQaQuestion()},components:{RichInput:i["a"]}},l=o,c=(a("3370"),a("536e"),a("2877")),u=Object(c["a"])(l,s,n,!1,null,"548dfe4a",null);e["default"]=u.exports},"263c":function(t,e,a){},3370:function(t,e,a){"use strict";var s=a("7762"),n=a.n(s);n.a},"536e":function(t,e,a){"use strict";var s=a("6333"),n=a.n(s);n.a},6333:function(t,e,a){},7762:function(t,e,a){},d322:function(t,e,a){"use strict";var s=a("263c"),n=a.n(s);n.a},d692:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"base-rich-input"},[a("div",{on:{click:t.checkIfLogin}},[a("el-card",{staticClass:"rich-text",attrs:{shadow:"hover"}},[a("el-row",{attrs:{type:"flex"}},[a("h1",[t._v(t._s(t.currentMode.title))])]),a("el-row",{staticClass:"rich-text__header",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:12}},[t.currentMode.hasTitle?a("el-input",{attrs:{maxlength:"30",clearable:"","show-word-limit":"",placeholder:"请输入问题的标题...",disabled:t.disabled},model:{value:t.question.title,callback:function(e){t.$set(t.question,"title",e)},expression:"question.title"}}):t._e()],1),a("el-col",{attrs:{span:6}},[t.currentMode.hasTags?a("el-input",{attrs:{maxlength:"12",clearable:"","show-word-limit":"",placeholder:"为问题选择/输入一个标签...",disabled:t.disabled},model:{value:t.question.tag,callback:function(e){t.$set(t.question,"tag",e)},expression:"question.tag"}}):t._e()],1)],1),a("ckeditor",{ref:"questioningEditor",staticClass:"ckeditor_base",attrs:{editor:t.editor,config:t.editorConfig,disabled:t.disabled},model:{value:t.question.content,callback:function(e){t.$set(t.question,"content",e)},expression:"question.content"}}),a("el-row",{staticClass:"rich-text__footer",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:5}},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.question.content=""}}},[t._v("清空内容")])],1),a("el-col",{attrs:{span:2.5}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$emit("upload")}}},[t._v(t._s(t.currentMode.submitText))])],1)],1)],1)],1)])},n=[],r=a("0469"),i=a("290f"),o=a("8b25"),l=a("2d79"),c=a("d4c1"),u=a("62e5"),p=a("7041"),d=a("c4b1"),f=a("a599"),h=a("271b"),g=a("8068"),y=a("f61b"),m=a("41ae"),_=a("39a0"),v=a("56b3"),q=a("7212"),b=a("233a"),w=a("0bf6"),C={name:"baseRichInput",props:{question:{type:Object,default:{}},disabled:{type:Boolean,default:{}},uploadImageUrl:{type:String},mode:{type:String,default:function(){return"questioning"}}},data:function(){return{questioning:{submitText:"提交问题",titleTips:"请输入问题的标题",hasTitle:!0,tagsTips:"为问题输入/选择一个标签",hasTags:!0,title:"提问题"},answering:{submitText:"提交回答",titleTips:"",hasTitle:!1,tagsTips:"",hasTags:!1,title:"回答问题"},editor:r["a"],editorConfig:{plugins:[i["a"],o["a"],l["a"],c["a"],u["a"],p["a"],d["a"],f["a"],h["a"],g["a"],y["a"],m["a"],_["a"],v["a"],q["a"],b["a"],w["a"]],toolbar:{items:["heading","|","link","imageUpload","|","bold","italic","fontSize","underline","superscript","code","|","alignment:left","alignment:right","alignment:center","alignment:justify","|","undo","redo"]},ckfinder:{uploadUrl:this.uploadImageUrl,options:{resourceType:".jpg,.jpeg,.png"}}}}},computed:{currentMode:function(){return"questioning"===this.mode?this.questioning:this.answering}},methods:{checkIfLogin:function(){this.$emit("checkIfLogin")}}},x=C,k=(a("d322"),a("2877")),j=Object(k["a"])(x,s,n,!1,null,null,null);e["a"]=j.exports}}]);
//# sourceMappingURL=chunk-ffc796d8.24b592a8.js.map