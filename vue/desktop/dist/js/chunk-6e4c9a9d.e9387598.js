(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e4c9a9d"],{"11e9":function(t,e,n){var o=n("52a7"),r=n("4630"),i=n("6821"),a=n("6a99"),c=n("69a8"),s=n("c69a"),l=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?l:function(t,e){if(t=i(t),e=a(e,!0),s)try{return l(t,e)}catch(n){}if(c(t,e))return r(!o.f.call(t,e),t[e])}},"1af6":function(t,e,n){var o=n("63b6");o(o.S,"Array",{isArray:n("9003")})},"20fd5":function(t,e,n){"use strict";var o=n("d9f6"),r=n("aebd");t.exports=function(t,e,n){e in t?o.f(t,e,r(0,n)):t[e]=n}},"25f3":function(t,e,n){},3702:function(t,e,n){var o=n("481b"),r=n("5168")("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||i[r]===t)}},"386d":function(t,e,n){"use strict";var o=n("cb7c"),r=n("83a1"),i=n("5f1b");n("214f")("search",1,(function(t,e,n,a){return[function(n){var o=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,o):new RegExp(n)[e](String(o))},function(t){var e=a(n,t,this);if(e.done)return e.value;var c=o(t),s=String(this),l=c.lastIndex;r(l,0)||(c.lastIndex=0);var u=i(c,s);return r(c.lastIndex,l)||(c.lastIndex=l),null===u?-1:u.index}]}))},"3b2b":function(t,e,n){var o=n("7726"),r=n("5dbc"),i=n("86cc").f,a=n("9093").f,c=n("aae3"),s=n("0bfb"),l=o.RegExp,u=l,f=l.prototype,p=/a/g,d=/a/g,h=new l(p)!==p;if(n("9e1e")&&(!h||n("79e5")((function(){return d[n("2b4c")("match")]=!1,l(p)!=p||l(d)==d||"/a/i"!=l(p,"i")})))){l=function(t,e){var n=this instanceof l,o=c(t),i=void 0===e;return!n&&o&&t.constructor===l&&i?t:r(h?new u(o&&!i?t.source:t,e):u((o=t instanceof l)?t.source:t,o&&i?s.call(t):e),n?this:f,l)};for(var g=function(t){t in l||i(l,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})},b=a(u),v=0;b.length>v;)g(b[v++]);f.constructor=l,l.prototype=f,n("2aba")(o,"RegExp",l)}n("7a56")("RegExp")},"40c3":function(t,e,n){var o=n("6b4c"),r=n("5168")("toStringTag"),i="Arguments"==o(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),r))?n:i?o(e):"Object"==(c=o(e))&&"function"==typeof e.callee?"Arguments":c}},"4ee1":function(t,e,n){var o=n("5168")("iterator"),r=!1;try{var i=[7][o]();i["return"]=function(){r=!0},Array.from(i,(function(){throw 2}))}catch(a){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var i=[7],c=i[o]();c.next=function(){return{done:n=!0}},i[o]=function(){return c},t(i)}catch(a){}return n}},"549b":function(t,e,n){"use strict";var o=n("d864"),r=n("63b6"),i=n("241e"),a=n("b0dc"),c=n("3702"),s=n("b447"),l=n("20fd5"),u=n("7cd6");r(r.S+r.F*!n("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,r,f,p=i(t),d="function"==typeof this?this:Array,h=arguments.length,g=h>1?arguments[1]:void 0,b=void 0!==g,v=0,y=u(p);if(b&&(g=o(g,h>2?arguments[2]:void 0,2)),void 0==y||d==Array&&c(y))for(e=s(p.length),n=new d(e);e>v;v++)l(n,v,b?g(p[v],v):p[v]);else for(f=y.call(p),n=new d;!(r=f.next()).done;v++)l(n,v,b?a(f,g,[r.value,v],!0):r.value);return n.length=v,n}})},"54a1":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("95d5")},"5dbc":function(t,e,n){var o=n("d3f4"),r=n("8b97").set;t.exports=function(t,e,n){var i,a=e.constructor;return a!==n&&"function"==typeof a&&(i=a.prototype)!==n.prototype&&o(i)&&r&&r(t,i),t}},7528:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{attrs:{type:"flex",justify:"space-between"}},[n("el-col",{attrs:{span:5}},[n("el-input",{attrs:{placeholder:"请输入搜索内容","prefix-icon":"el-icon-search",size:"small"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),n("el-row",{staticClass:"resources-list"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.resources}},[1===t.user.userType?n("el-table-column",{attrs:{prop:"filename"},scopedSlots:t._u([{key:"header",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.uploadResource}},[n("i",{staticClass:"el-icon-upload el-icon--left"}),t._v("上传软件\n          ")])]}},{key:"default",fn:function(e){return[n("a",{staticClass:"download-link",attrs:{href:e.row.href,download:e.row.filename}},[t._v(t._s(e.row.filename))]),/\.pdf$/i.test(e.row.filename)?n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",size:"small"},on:{click:function(n){t.$router.push({path:"/library/"+t.encodeFilename(e.row.filename)})}}},[t._v("在线预览")]):t._e()]}}],null,!1,2693326410)}):n("el-table-column",{attrs:{prop:"filename",label:"下载"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{staticClass:"download-link",attrs:{href:e.row.href,download:e.row.filename}},[t._v(t._s(e.row.filename))]),/\.pdf$/i.test(e.row.filename)?n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",size:"small"},on:{click:function(n){t.$router.push({path:"/library/"+t.encodeFilename(e.row.filename)})}}},[t._v("在线预览")]):t._e()]}}])}),n("el-table-column",{attrs:{prop:"date",label:"日期",align:"right",width:"180"}}),1===t.user.userType?n("el-table-column",{attrs:{label:"操作",align:"right",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return t.delResource(e.row)}}},[t._v("删除")])]}}],null,!1,3875224312)}):t._e()],1)],1),n("el-row",{attrs:{type:"flex",justify:"center"}},[t.gotAllResources?t._e():n("span",{staticClass:"show-more",on:{click:t.showMore}},[t._v("显示更多")])]),1===t.user.userType?n("el-dialog",{attrs:{title:"上传资源",visible:t.uploadDialogVisible},on:{"update:visible":function(e){t.uploadDialogVisible=e}}},[n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-upload",{ref:"upload",attrs:{drag:"",multiple:"",action:t.$serverBaseUrl+"/api/uploadResources",data:{classify:t.uploadClassify},"with-credentials":!0,"on-remove":t.handleRemove,"on-error":t.handleError,"on-success":t.handleSuccess,"file-list":t.fileList,"auto-upload":!1}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[t._v("\n          将文件拖到此处，或\n          "),n("em",[t._v("点击上传")])]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.uploadTip))])])],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.uploadDialogVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary",loading:t.updating},on:{click:t.submitUpload}},[t._v("开始上传")])],1),n("el-dialog",{attrs:{width:"30%",title:"上传成功",visible:t.uploadSuccessDialogVisible,"before-close":t.beforeSuccessDialogClose,"append-to-body":""},on:{"update:visible":function(e){t.uploadSuccessDialogVisible=e}}},[n("span",[t._v(t._s(t.uploaded)+"个文件已成功上传")]),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.continueUpload}},[t._v("继续上传")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push({path:"/emptyPage"})}}},[t._v("返回资源列表")])],1)])],1):t._e()],1)},r=[],i=n("75fc"),a=(n("a481"),n("386d"),n("3b2b"),{data:function(){return{classify:"software",search:"",loading:!0,allResources:[],skip:0,limit:15,gotAllResources:!1,uploadDialogVisible:!1,uploadClassify:"software",fileList:[],updating:!1,uploaded:0,uploadSuccessDialogVisible:!1}},computed:{resources:function(){var t=this;return this.allResources.filter((function(e){return new RegExp(t.search,"i").test(e.filename)}))},uploadTip:function(){if("software"===this.classify)return"请打包成单个文件后再上传"}},props:{user:{type:Object,default:{}}},created:function(){this.getResources("software")},methods:{encodeFilename:function(t){return t.replace(/\+/g,"%2B").replace(/ /g,"-").replace(/\//g,"%2F").replace(/\?/g,"%3F").replace(/#/g,"%23").replace(/&/g,"%26").replace(/=/g,"%3D")},decodeFilename:function(t){return t.replace(/%2B/g,"+").replace(/%2F/g,"/").replace(/%3F/g,"?").replace(/%23/g,"#").replace(/%26/g,"&").replace(/%3D/g,"=")},showMore:function(){this.skip+=this.limit,this.getResources(this.classify)},getResources:function(t){var e=this;this.loading=!0,this.$http.post("/api/getResources",{classify:t,skip:this.skip,limit:this.limit}).then((function(t){if(1===t.data.code){var n,o=t.data.data.map((function(t){return{filename:e.decodeFilename(t.filename),date:e.dateFormat(t.created),classify:t.classify,href:"".concat(e.$serverBaseUrl,"/static/").concat(t.classify,"/").concat(t.filename)}}));(n=e.allResources).push.apply(n,Object(i["a"])(o)),o.length<e.limit&&(e.gotAllResources=!0)}})).catch((function(t){console.log(t)})).finally((function(){e.loading=!1}))},delResource:function(t){var e=this,n=this;this.$confirm("此操作将从服务器删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$http.post("/api/delResources",{classify:t.classify,filename:t.filename}).then((function(e){1===e.data.code&&n.$alert("".concat(t.filename,"已删除"),"删除成功",{confirmButtonText:"确定",callback:function(t){n.$router.push({path:"/emptyPage"})}})})).catch((function(t){console.log(t)}))})).catch((function(){}))},uploadResource:function(){this.uploadDialogVisible=!0},clearFileList:function(){this.uploaded=0,this.fileList=[]},submitUpload:function(){this.$refs.upload.submit(),this.updating=!0},handleRemove:function(t,e){},handleError:function(t,e,n){},handleSuccess:function(t,e,n){var o=this;1===t.code&&(this.uploaded++,this.uploaded>=n.length&&(this.updating=!1,this.uploadSuccessDialogVisible=!0)),0===t.code&&(this.updating=!1,this.clearFileList(),this.$alert(t.info,"上传失败",{confirmButtonText:"确定",callback:function(t){o.$router.push({path:"/emptyPage"})}})),-1===t.code&&(this.updating=!1,this.clearFileList(),this.$alert("发生了错误导致上传失败","上传失败",{confirmButtonText:"确定"}),console.log(t.errMsg))},continueUpload:function(){this.clearFileList(),this.uploadSuccessDialogVisible=!1},beforeSuccessDialogClose:function(t){this.clearFileList(),t()},dateFormat:function(t){var e=new Date(t);return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())}}}),c=a,s=(n("c33a"),n("2877")),l=Object(s["a"])(c,o,r,!1,null,"36d906a0",null);e["default"]=l.exports},"75fc":function(t,e,n){"use strict";var o=n("a745"),r=n.n(o);function i(t){if(r()(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var a=n("774e"),c=n.n(a),s=n("c8bb"),l=n.n(s);function u(t){if(l()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return c()(t)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){return i(t)||u(t)||f()}n.d(e,"a",(function(){return p}))},"774e":function(t,e,n){t.exports=n("d2d5")},"7cd6":function(t,e,n){var o=n("40c3"),r=n("5168")("iterator"),i=n("481b");t.exports=n("584a").getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||i[o(t)]}},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"8b97":function(t,e,n){var o=n("d3f4"),r=n("cb7c"),i=function(t,e){if(r(t),!o(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,o){try{o=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),o(t,[]),e=!(t instanceof Array)}catch(r){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:o(t,n),t}}({},!1):void 0),check:i}},9093:function(t,e,n){var o=n("ce10"),r=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return o(t,r)}},"95d5":function(t,e,n){var o=n("40c3"),r=n("5168")("iterator"),i=n("481b");t.exports=n("584a").isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||i.hasOwnProperty(o(e))}},a745:function(t,e,n){t.exports=n("f410")},b0dc:function(t,e,n){var o=n("e4ae");t.exports=function(t,e,n,r){try{return r?e(o(n)[0],n[1]):e(n)}catch(a){var i=t["return"];throw void 0!==i&&o(i.call(t)),a}}},c33a:function(t,e,n){"use strict";var o=n("25f3"),r=n.n(o);r.a},c8bb:function(t,e,n){t.exports=n("54a1")},d2d5:function(t,e,n){n("1654"),n("549b"),t.exports=n("584a").Array.from},f410:function(t,e,n){n("1af6"),t.exports=n("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-6e4c9a9d.e9387598.js.map