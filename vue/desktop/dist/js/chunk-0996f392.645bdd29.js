(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0996f392"],{"2f21":function(e,t,n){"use strict";var l=n("79e5");e.exports=function(e,t){return!!e&&l((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},4972:function(e,t,n){"use strict";var l=n("8555"),o=n.n(l);o.a},"55dd":function(e,t,n){"use strict";var l=n("5ca1"),o=n("d8e8"),i=n("4bf8"),s=n("79e5"),a=[].sort,c=[1,2,3];l(l.P+l.F*(s((function(){c.sort(void 0)}))||!s((function(){c.sort(null)}))||!n("2f21")(a)),"Array",{sort:function(e){return void 0===e?a.call(i(this)):a.call(i(this),o(e))}})},8555:function(e,t,n){},e7f6:function(e,t,n){"use strict";n.r(t);var l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[1===e.user.userType&&e.user.id===e.courseDetail.tchID?n("el-form",{ref:"newBulletinForm",attrs:{"label-position":"top","label-width":"80px",model:e.newBulletin,rules:e.newBulletinRules}},[n("el-form-item",{attrs:{label:"发表新公告",prop:"content"}},[n("el-input",{attrs:{type:"textarea",resize:"none",autosize:{minRows:2,maxRows:4}},model:{value:e.newBulletin.content,callback:function(t){e.$set(e.newBulletin,"content",t)},expression:"newBulletin.content"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addBulletin("newBulletinForm")}}},[e._v("发布")])],1)],1):e._e(),n("div",{staticClass:"bulletins"},[n("el-collapse",{model:{value:e.activeBulletinNames,callback:function(t){e.activeBulletinNames=t},expression:"activeBulletinNames"}},e._l(e.courseDetail.bulletins,(function(t,l){return n("el-collapse-item",{key:l,attrs:{title:e.$dayjs(t.created).format("YYYY/MM/DD HH:mm:ss"),name:l}},[n("p",{staticClass:"bulletin-content"},[e._v(e._s(t.content))])])})),1)],1)],1)},o=[],i=(n("55dd"),n("915c")),s={props:{user:{type:Object,default:function(){}},courseID:{type:String,default:""}},data:function(){return{newBulletinRules:{content:[{required:!0,message:"请输入公告内容",trigger:"blur"}]},newBulletin:{content:""},activeBulletinNames:[0],courseDetail:{}}},created:function(){this.getCourseDetail()},methods:{getCourseDetail:function(){var e=this;console.log(),i["b"].getCourseDetail({courseID:this.courseID}).then((function(t){1===t.data.code?(e.courseDetail=t.data.data,e.getBulletins()):-1===t.data.code&&e.$message.error("加载失败")})).catch((function(e){console.log(e)}))},handleBulletinHidden:function(){this.$refs.newBulletinForm.resetFields(),this.activeBulletinNames=[0]},addBulletin:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;i["b"].addBulletin({courseID:t.courseID,content:t.newBulletin.content}).then((function(e){1===e.data.code&&(t.handleBulletinHidden(),t.$message({message:"公告发布成功",type:"success"}),t.getBulletins()),-1===e.data.code&&(console.log(e.data.errMsg),t.$message.error("公告发布失败"))})).catch((function(e){console.log(e)}))}))},getBulletins:function(){var e=this;i["b"].getBulletins("?courseID=".concat(this.courseID)).then((function(t){if(1===t.data.code){var n=t.data.data.sort((function(e,t){return e.created<t.created?1:e.created>t.created?-1:0}));e.$set(e.courseDetail,"bulletins",n)}-1===t.data.code&&(console.log(t.data.errMsg),e.$message.error("公告获取失败"))})).catch((function(e){console.log(e)}))}}},a=s,c=(n("4972"),n("2877")),u=Object(c["a"])(a,l,o,!1,null,"12ca19be",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-0996f392.645bdd29.js.map