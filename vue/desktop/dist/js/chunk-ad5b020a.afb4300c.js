(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ad5b020a"],{"263c":function(t,e,a){},"48e4":function(t,e,a){"use strict";var n=a("d3ed"),i=a.n(n);i.a},d322:function(t,e,a){"use strict";var n=a("263c"),i=a.n(n);i.a},d3ed:function(t,e,a){},d692:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"base-rich-input"},[a("div",{on:{click:t.checkIfLogin}},[a("el-card",{staticClass:"rich-text",attrs:{shadow:"hover"}},[a("el-row",{attrs:{type:"flex"}},[a("h1",[t._v(t._s(t.currentMode.title))])]),a("el-row",{staticClass:"rich-text__header",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:12}},[t.currentMode.hasTitle?a("el-input",{attrs:{maxlength:"30",clearable:"","show-word-limit":"",placeholder:"请输入问题的标题...",disabled:t.disabled},model:{value:t.question.title,callback:function(e){t.$set(t.question,"title",e)},expression:"question.title"}}):t._e()],1),a("el-col",{attrs:{span:6}},[t.currentMode.hasTags?a("el-input",{attrs:{maxlength:"12",clearable:"","show-word-limit":"",placeholder:"为问题选择/输入一个标签...",disabled:t.disabled},model:{value:t.question.tag,callback:function(e){t.$set(t.question,"tag",e)},expression:"question.tag"}}):t._e()],1)],1),a("ckeditor",{ref:"questioningEditor",staticClass:"ckeditor_base",attrs:{editor:t.editor,config:t.editorConfig,disabled:t.disabled},model:{value:t.question.content,callback:function(e){t.$set(t.question,"content",e)},expression:"question.content"}}),a("el-row",{staticClass:"rich-text__footer",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:5}},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.question.content=""}}},[t._v("清空内容")])],1),a("el-col",{attrs:{span:2.5}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$emit("upload")}}},[t._v(t._s(t.currentMode.submitText))])],1)],1)],1)],1)])},i=[],s=a("0469"),o=a("290f"),l=a("8b25"),r=a("2d79"),u=a("d4c1"),c=a("62e5"),d=a("7041"),p=a("c4b1"),h=a("a599"),f=a("271b"),g=a("8068"),m=a("f61b"),b=a("41ae"),v=a("39a0"),q=a("56b3"),y=a("7212"),w=a("233a"),x=a("0bf6"),_={name:"baseRichInput",props:{question:{type:Object,default:{}},disabled:{type:Boolean,default:{}},uploadImageUrl:{type:String},mode:{type:String,default:function(){return"questioning"}}},data:function(){return{questioning:{submitText:"提交问题",titleTips:"请输入问题的标题",hasTitle:!0,tagsTips:"为问题输入/选择一个标签",hasTags:!0,title:"提问题"},answering:{submitText:"提交回答",titleTips:"",hasTitle:!1,tagsTips:"",hasTags:!1,title:"回答问题"},editor:s["a"],editorConfig:{plugins:[o["a"],l["a"],r["a"],u["a"],c["a"],d["a"],p["a"],h["a"],f["a"],g["a"],m["a"],b["a"],v["a"],q["a"],y["a"],w["a"],x["a"]],toolbar:{items:["heading","|","link","imageUpload","|","bold","italic","fontSize","underline","superscript","code","|","alignment:left","alignment:right","alignment:center","alignment:justify","|","undo","redo"]},ckfinder:{uploadUrl:this.uploadImageUrl,options:{resourceType:".jpg,.jpeg,.png"}}}}},computed:{currentMode:function(){return"questioning"===this.mode?this.questioning:this.answering}},methods:{checkIfLogin:function(){this.$emit("checkIfLogin")}}},k=_,$=(a("d322"),a("2877")),T=Object($["a"])(k,n,i,!1,null,null,null);e["a"]=T.exports},e2c5:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"qa-view",attrs:{name:"qa-view"}},[a("div",{staticClass:"cmt"},[a("el-row",{staticClass:"cmt__header",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:5}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.selectData.value,callback:function(e){t.$set(t.selectData,"value",e)},expression:"selectData.value"}},t._l(t.selectData.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"请输入搜索内容...","prefix-icon":"el-icon-search"},model:{value:t.searchData.value,callback:function(e){t.$set(t.searchData,"value",e)},expression:"searchData.value"}})],1)],1),a("div",{staticClass:"cmt-content"},[a("el-row",[a("el-col",[a("div",{staticClass:"cmt__content__table"},[a("el-table",{attrs:{data:t.singlePageQuestions,stripe:"","highlight-current-row":"",loading:t.loading}},[a("el-table-column",{attrs:{prop:"title",label:"标题",align:"left"}}),a("el-table-column",{attrs:{prop:"questionerName",label:"姓名",align:"left"}}),a("el-table-column",{attrs:{prop:"tag",label:"问题标签",align:"left"}}),a("el-table-column",{attrs:{prop:"created",label:"提出时间",sortable:"",align:"left"}}),a("el-table-column",{attrs:{prop:"replysLength",label:"回答数",sortable:"",align:"left"}}),a("el-table-column",{attrs:{label:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini "},on:{click:function(a){return t.viewQuestionDetails(e)}}},[t._v("查看")])]}}])})],1)],1)])],1)],1),a("el-row",{staticClass:"cmt-index"},[a("el-col",[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":this.offset,layout:"prev, pager, next, jumper",total:t.totalItems,background:""},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.handleCurPageChange}})],1)],1)],1),a("RichInput",{ref:"qaRichInput",attrs:{question:t.question,disabled:!t.isLogin,uploadImageUrl:t.$serverBaseUrl+"/api/uploadQaImage?questionerID="+t.user.id,mode:"questioning"},on:{"update:question":function(e){t.question=e},upload:t.upload}})],1)},i=[],s=(a("ac4d"),a("8a81"),a("ac6a"),a("3b2b"),a("d692")),o={name:"qaview",props:{user:{type:Object,default:{}}},data:function(){return{selectData:{options:[],value:""},searchData:{value:""},questions:[],index:0,offset:8,loading:!0,currentPage:1,question:{title:"",content:"",questionerID:"",questionerName:"",questionerAvatar:"",questionerType:"",tag:"",replys:[]},uploadImageUrl:"",richInputMode:""}},computed:{isLogin:function(){return this.user.id},totalItems:function(){return this.questions.length},singlePageQuestions:function(){return this.searchQuestions||this.questions.slice(this.index,this.index+this.offset)},searchQuestions:function(){var t=this;return this.questions.filter((function(e){return new RegExp(t.searchData.value,"i").test(e.title)}))}},methods:{handleCurPageChange:function(t){this.index=(t-1)*this.offset},viewQuestionDetails:function(t){this.$router.push({path:"".concat(this.$route.path,"/").concat(t.row.qaID)})},getQaQuestions:function(){var t=this,e="/api/getQaQuestions";this.$http.get(e).then((function(e){if(1===e.data.code){t.questions=e.data.data;var a=!0,n=!1,i=void 0;try{for(var s,o=t.questions[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var l=s.value;l.created=t.$dayjs(l.created).format("YYYY-MM-DD"),l["replysLength"]=l.replys.length}}catch(r){n=!0,i=r}finally{try{a||null==o.return||o.return()}finally{if(n)throw i}}}})).catch((function(t){console.log(t)})).finally((function(){}))},beforeUploadQuestion:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:"标题",content:"问题内容"},e=this.question;for(var a in t)if(""===e[a])return this.emptyUploadToast(t[a]),!1;return!0},uploadQuestion:function(){var t=this;this.$confirm("是否确认提交问题?","确认提交",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e="/api/uploadQaQuestion";t.$http.post(e,t.question).then((function(e){1===e.data.code?(t.$message({message:"提交成功！",type:"success"}),t.$router.push({path:"/emptyPage"})):t.$message.error("提交失败！")})).catch((function(e){t.$message.error("提交失败"),console.log(e)}))})).catch((function(){}))},upload:function(){this.beforeUploadQuestion()&&this.uploadQuestion()},loginToast:function(){var t=this;this.$alert("请先登录！","登录提示",{confirmButtonText:"确定",callback:function(e){t.$router.push({path:"/auth"})}})},emptyUploadToast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"内容";this.$message.error("".concat(t,"不能为空！"))}},created:function(){if(this.getQaQuestions(),this.isLogin){var t=this.question;t.questionerID=this.user.id,t.questionerName=this.user.username,t.questionerAvatar=this.user.avatar,t.questionerType=this.user.usertype}},components:{RichInput:s["a"]}},l=o,r=(a("48e4"),a("2877")),u=Object(r["a"])(l,n,i,!1,null,"49714c22",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-ad5b020a.afb4300c.js.map