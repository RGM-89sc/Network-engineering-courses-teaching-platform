(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4391c940"],{2116:function(t,e){t.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18.68 2.53c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.08c0-.58-.01-.55.6-.55h17.38zM15.77 14.5v-10H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 6.677a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V6.676z"/></svg>'},2162:function(t,e){t.exports='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>\r\n'},2366:function(t,e){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);function r(t,e){var i=e||0,r=n;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}t.exports=r},"2d6f":function(t,e,n){},4180:function(t,e,n){},"6eb8":function(t,e,n){},abd6:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{attrs:{type:"flex",gutter:20}},[n("el-col",{attrs:{span:17}},[n("el-card",[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v(t._s(this.partInfo.title))])]),n("ckeditor",{attrs:{editor:t.editor,config:t.editorConfig},model:{value:t.editorData,callback:function(e){t.editorData=e},expression:"editorData"}})],1)],1),n("el-col",{attrs:{span:7}},[n("el-card",{staticStyle:{"margin-bottom":"20px"}},[n("el-form",{attrs:{"label-position":"top","label-width":"80px",model:t.partInfo,"status-icon":"",rules:t.partInfoRules}},[n("el-form-item",{staticClass:"form-item",attrs:{label:"标题：",prop:"title"}},[n("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.partInfo.title,callback:function(e){t.$set(t.partInfo,"title",e)},expression:"partInfo.title"}})],1),n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.updatePart}},[t._v("发布/更新")])],1)],1),n("el-card",[n("el-upload",{ref:"upload",attrs:{accept:".mp4",action:t.$serverBaseUrl+"/api/uploadCourseVideoChunks",data:{courseID:t.$route.query.id,chapter:t.$route.query.c,part:t.$route.query.p},"http-request":t.uploadVideo,"with-credentials":!0,"file-list":t.videoes,"on-remove":t.delVideo,"on-preview":t.checkVideoUrl}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v("上传视频")]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[n("p",[t._v("请注意：")]),n("p",[t._v("1、如需插入视频，请先在此上传所需视频再使用视频地址插入")]),n("p",[t._v("2、只能上传mp4文件")])])],1)],1),n("el-dialog",{attrs:{title:"上传成功",visible:t.uploadVideoScuessDialogVis,width:"30%","before-close":function(){return!1},"show-close":!1},on:{"update:visible":function(e){t.uploadVideoScuessDialogVis=e}}},[n("p",[t._v("视频上传成功！视频地址：")]),n("el-input",{attrs:{id:"uploaded-video-url"},model:{value:t.uploadVideoScuessUrl[t.uploadVideoScuessName],callback:function(e){t.$set(t.uploadVideoScuessUrl,t.uploadVideoScuessName,e)},expression:"uploadVideoScuessUrl[uploadVideoScuessName]"}}),n("p",[t._v("您也可以点击该视频查看视频地址")]),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{plain:""},on:{click:function(e){t.uploadVideoScuessDialogVis=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.copyUploadVideoScuessUrl}},[t._v("复制地址")])],1)],1)],1)],1)],1)},r=[],o=(n("28a5"),n("7f7f"),n("ac6a"),n("a481"),n("915c")),a=n("0469"),s=n("290f"),u=n("8b25"),l=n("2d79"),c=n("d4c1"),h=n("62e5"),f=n("7041"),d=n("c4b1"),v=n("a599"),p=n("271b"),m=n("8068"),g=n("f61b"),y=n("41ae"),b=n("39a0"),w=n("56b3"),k=n("7212"),_=n("233a"),O=n("0bf6"),x=n("d225"),P=n("b0b4"),T=n("308d"),S=n("6bb5"),I=n("4e2b"),j=n("109b");
/**
 * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function B(t,e){return function(t){t.on("attribute:url:media",n)};function n(n,i,r){if(r.consumable.consume(i.item,n.name)){var o=i.attributeNewValue,a=r.writer,s=r.mapper.toViewElement(i.item);a.remove(a.createRangeIn(s));var u=t.getMediaViewElement(a,o,e);a.insert(a.createPositionAt(s,0),u)}}}var V=n("652f"),E=n("2beb");
/**
 * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
function A(t,e,n){return e.setCustomProperty("media",!0,t),Object(E["e"])(t,e,{label:n})}function N(t,e,n,i){var r=t.createContainerElement("figure",{class:"media"});return r.getFillerOffset=M,t.insert(t.createPositionAt(r,0),e.getMediaViewElement(t,n,i)),r}function C(t){var e=t.getSelectedElement();return e&&e.is("media")?e:null}function D(t,e,n){t.change((function(i){var r=i.createElement("media",{url:e});t.insertContent(r,n),i.setSelection(r,"on")}))}function M(){return null}
/**
 * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */var z=function(t){function e(){return Object(x["a"])(this,e),Object(T["a"])(this,Object(S["a"])(e).apply(this,arguments))}return Object(I["a"])(e,t),Object(P["a"])(e,[{key:"refresh",value:function(){var t=this.editor.model,e=t.document.selection,n=t.schema,i=e.getFirstPosition(),r=C(e),o=i.parent;o!=o.root&&(o=o.parent),this.value=r?r.getAttribute("url"):null,this.isEnabled=n.checkChild(o,"media")}},{key:"execute",value:function(t){var e=this.editor.model,n=e.document.selection,i=C(n);if(i)e.change((function(e){e.setAttribute("url",t,i)}));else{var r=Object(E["b"])(n,e);D(e,t,r)}}}]),e}(V["a"]),q=(n("4917"),n("ac4d"),n("8a81"),n("5df3"),n("4f7f"),n("2162")),R=n.n(q),F=n("f28b"),$="https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html";Object(F["a"])(Error);function U(t){var e=t.match(/^([^:]+):/);return e?t+" Read more: ".concat($,"#error-").concat(e[1],"\n"):t}
/**
 * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */var H={error:function(t,e){console.error(U(t),e)},warn:function(t,e){console.warn(U(t),e)}},J=H,L=n("a16b"),W=n("631f"),G=n("e805"),K="0 0 64 42",Y=function(){function t(e,n){Object(x["a"])(this,t);var i=n.providers,r=n.extraProviders||[],o=new Set(n.removeProviders),a=i.concat(r).filter((function(t){var e=t.name;return e?!o.has(e):(J.warn("media-embed-no-provider-name: The configured media provider has no name and cannot be used.",{provider:t}),!1)}));this.locale=e,this.providerDefinitions=a}return Object(P["a"])(t,[{key:"hasMedia",value:function(t){return!!this._getMedia(t)}},{key:"getMediaViewElement",value:function(t,e,n){return this._getMedia(e).getViewElement(t,n)}},{key:"_getMedia",value:function(t){if(!t)return new Q(this.locale);t=t.trim();var e=!0,n=!1,i=void 0;try{for(var r,o=this.providerDefinitions[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=a.html,u=a.url;Array.isArray(u)||(u=[u]);var l=!0,c=!1,h=void 0;try{for(var f,d=u[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var v=f.value,p=this._getUrlMatches(t,v);if(p)return new Q(this.locale,t,p,s)}}catch(m){c=!0,h=m}finally{try{l||null==d.return||d.return()}finally{if(c)throw h}}}}catch(m){n=!0,i=m}finally{try{e||null==o.return||o.return()}finally{if(n)throw i}}return null}},{key:"_getUrlMatches",value:function(t,e){var n=t.match(e);if(n)return n;var i=t.replace(/^https?:\/\//,"");return n=i.match(e),n||(i=i.replace(/^www\./,""),n=i.match(e),n||null)}}]),t}(),Q=function(){function t(e,n,i,r){Object(x["a"])(this,t),this.url=this._getValidUrl(n),this._t=e.t,this._match=i,this._previewRenderer=r}return Object(P["a"])(t,[{key:"getViewElement",value:function(t,e){var n={};if(e.renderForEditingView||e.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(n["data-oembed-url"]=this.url),e.renderForEditingView&&(n.class="ck-media__wrapper");var i=this._getPreviewHtml(e);return t.createUIElement("div",n,(function(t){var e=this.toDomElement(t);return e.innerHTML=i,e}))}return this.url&&(n.url=this.url),t.createEmptyElement("oembed",n)}},{key:"_getPreviewHtml",value:function(t){return this._previewRenderer?this._previewRenderer(this._match):this.url&&t.renderForEditingView?this._getPlaceholderHtml():""}},{key:"_getPlaceholderHtml",value:function(){var t=new L["a"],e=new W["a"];t.text=this._t("Open media in new tab"),e.content=R.a,e.viewBox=K;var n=new G["a"]({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[e]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"new",href:this.url},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]},t]}]}).render();return n.outerHTML}},{key:"_getValidUrl",value:function(t){return t?t.match(/^https?/)?t:"https://"+t:null}}]),t}(),X=(n("2d6f"),function(t){function e(t){var n;return Object(x["a"])(this,e),n=Object(T["a"])(this,Object(S["a"])(e).call(this,t)),t.config.define("mediaEmbed",{providers:[{name:"normal",url:/^(.+\.mp4)$/,html:function(t){return'<div style="position: relative; padding-bottom: 100%; height: 0;">'+'<video src="'.concat(t[1],'" width="100%" controls="controls"></video>')+"</div>"}},{name:"youku",url:/^v\.youku\.com\/v_show\/id_(.+)\.html$/,html:function(t){return'<iframe height=498 width=510 src="http://player.youku.com/embed/'.concat(t[1],'" frameborder=0 allowfullscreen></iframe>')}}]}),n.registry=new Y(t.locale,t.config.get("mediaEmbed")),n}return Object(I["a"])(e,t),Object(P["a"])(e,null,[{key:"pluginName",get:function(){return"MediaEmbedEditing"}}]),Object(P["a"])(e,[{key:"init",value:function(){var t=this.editor,e=t.model.schema,n=t.t,i=t.conversion,r=t.config.get("mediaEmbed.previewsInData"),o=this.registry;t.commands.add("mediaEmbed",new z(t)),e.register("media",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["url"]}),i.for("dataDowncast").elementToElement({model:"media",view:function(t,e){var n=t.getAttribute("url");return N(e,o,n,{renderMediaPreview:n&&r})}}),i.for("dataDowncast").add(B(o,{renderMediaPreview:r})),i.for("editingDowncast").elementToElement({model:"media",view:function(t,e){var i=t.getAttribute("url"),r=N(e,o,i,{renderForEditingView:!0});return A(r,e,n("媒体小部件"))}}),i.for("editingDowncast").add(B(o,{renderForEditingView:!0})),i.for("upcast").elementToElement({view:{name:"oembed",attributes:{url:!0}},model:function(t,e){var n=t.getAttribute("url");if(o.hasMedia(n))return e.createElement("media",{url:n})}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:function(t,e){var n=t.getAttribute("data-oembed-url");if(o.hasMedia(n))return e.createElement("media",{url:n})}})}}]),e}(j["a"])),Z=n("35ad"),tt=n("013f"),et=n("2a88"),nt=(n("55dd"),n("75fc")),it=(n("96cf"),n("1c4c"),n("b286")),rt=n("f2ea"),ot=n("e47a"),at=(n("e800"),function(){function t(e){Object(x["a"])(this,t),this.parent=null,this._attrs=Object(it["a"])(e)}return Object(P["a"])(t,[{key:"getPath",value:function(){var t=[],e=this;while(e.parent)t.unshift(e.startOffset),e=e.parent;return t}},{key:"getAncestors",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeSelf:!1,parentFirst:!1},e=[],n=t.includeSelf?this:this.parent;while(n)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}},{key:"getCommonAncestor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getAncestors(e),i=t.getAncestors(e),r=0;while(n[r]==i[r]&&n[r])r++;return 0===r?null:n[r-1]}},{key:"isBefore",value:function(t){if(this==t)return!1;if(this.root!==t.root)return!1;var e=this.getPath(),n=t.getPath(),i=Object(ot["a"])(e,n);switch(i){case"prefix":return!0;case"extension":return!1;default:return e[i]<n[i]}}},{key:"isAfter",value:function(t){return this!=t&&(this.root===t.root&&!this.isBefore(t))}},{key:"hasAttribute",value:function(t){return this._attrs.has(t)}},{key:"getAttribute",value:function(t){return this._attrs.get(t)}},{key:"getAttributes",value:function(){return this._attrs.entries()}},{key:"getAttributeKeys",value:function(){return this._attrs.keys()}},{key:"toJSON",value:function(){var t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce((function(t,e){return t[e[0]]=e[1],t}),{})),t}},{key:"is",value:function(t){return"node"==t||"model:node"==t}},{key:"_clone",value:function(){return new t(this._attrs)}},{key:"_remove",value:function(){this.parent._removeChildren(this.index)}},{key:"_setAttribute",value:function(t,e){this._attrs.set(t,e)}},{key:"_setAttributesTo",value:function(t){this._attrs=Object(it["a"])(t)}},{key:"_removeAttribute",value:function(t){return this._attrs.delete(t)}},{key:"_clearAttributes",value:function(){this._attrs.clear()}},{key:"index",get:function(){var t;if(!this.parent)return null;if(null===(t=this.parent.getChildIndex(this)))throw new rt["b"]("model-node-not-found-in-parent: The node's parent does not contain this node.",this);return t}},{key:"startOffset",get:function(){var t;if(!this.parent)return null;if(null===(t=this.parent.getChildStartOffset(this)))throw new rt["b"]("model-node-not-found-in-parent: The node's parent does not contain this node.",this);return t}},{key:"offsetSize",get:function(){return 1}},{key:"endOffset",get:function(){return this.parent?this.startOffset+this.offsetSize:null}},{key:"nextSibling",get:function(){var t=this.index;return null!==t&&this.parent.getChild(t+1)||null}},{key:"previousSibling",get:function(){var t=this.index;return null!==t&&this.parent.getChild(t-1)||null}},{key:"root",get:function(){var t=this;while(t.parent)t=t.parent;return t}},{key:"document",get:function(){return this.root==this?null:this.root.document||null}}]),t}()),st=function(t){function e(t,n){var i;return Object(x["a"])(this,e),i=Object(T["a"])(this,Object(S["a"])(e).call(this,n)),i._data=t||"",i}return Object(I["a"])(e,t),Object(P["a"])(e,[{key:"is",value:function(t){return"text"==t||"model:text"==t||Object(et["a"])(Object(S["a"])(e.prototype),"is",this).call(this,t)}},{key:"toJSON",value:function(){var t=Object(et["a"])(Object(S["a"])(e.prototype),"toJSON",this).call(this);return t.data=this.data,t}},{key:"_clone",value:function(){return new e(this.data,this.getAttributes())}},{key:"offsetSize",get:function(){return this.data.length}},{key:"data",get:function(){return this._data}}],[{key:"fromJSON",value:function(t){return new e(t.data,t.attributes)}}]),e}(at),ut=function(){function t(e,n,i){if(Object(x["a"])(this,t),this.textNode=e,n<0||n>e.offsetSize)throw new rt["b"]("model-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.",this);if(i<0||n+i>e.offsetSize)throw new rt["b"]("model-textproxy-wrong-length: Given length value is incorrect.",this);this.data=e.data.substring(n,n+i),this.offsetInText=n}return Object(P["a"])(t,[{key:"is",value:function(t){return"textProxy"==t||"model:textProxy"==t}},{key:"getPath",value:function(){var t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}},{key:"getAncestors",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeSelf:!1,parentFirst:!1},e=[],n=t.includeSelf?this:this.parent;while(n)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}},{key:"hasAttribute",value:function(t){return this.textNode.hasAttribute(t)}},{key:"getAttribute",value:function(t){return this.textNode.getAttribute(t)}},{key:"getAttributes",value:function(){return this.textNode.getAttributes()}},{key:"getAttributeKeys",value:function(){return this.textNode.getAttributeKeys()}},{key:"startOffset",get:function(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}},{key:"offsetSize",get:function(){return this.data.length}},{key:"endOffset",get:function(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}},{key:"isPartial",get:function(){return this.offsetSize!==this.textNode.offsetSize}},{key:"parent",get:function(){return this.textNode.parent}},{key:"root",get:function(){return this.textNode.root}},{key:"document",get:function(){return this.textNode.document}}]),t}(),lt=function(){function t(e){Object(x["a"])(this,t),this._nodes=[],e&&this._insertNodes(0,e)}return Object(P["a"])(t,[{key:Symbol.iterator,value:function(){return this._nodes[Symbol.iterator]()}},{key:"getNode",value:function(t){return this._nodes[t]||null}},{key:"getNodeIndex",value:function(t){var e=this._nodes.indexOf(t);return-1==e?null:e}},{key:"getNodeStartOffset",value:function(t){var e=this.getNodeIndex(t);return null===e?null:this._nodes.slice(0,e).reduce((function(t,e){return t+e.offsetSize}),0)}},{key:"indexToOffset",value:function(t){if(t==this._nodes.length)return this.maxOffset;var e=this._nodes[t];if(!e)throw new rt["b"]("model-nodelist-index-out-of-bounds: Given index cannot be found in the node list.",this);return this.getNodeStartOffset(e)}},{key:"offsetToIndex",value:function(t){var e=0,n=!0,i=!1,r=void 0;try{for(var o,a=this._nodes[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(t>=e&&t<e+s.offsetSize)return this.getNodeIndex(s);e+=s.offsetSize}}catch(u){i=!0,r=u}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}if(e!=t)throw new rt["b"]("model-nodelist-offset-out-of-bounds: Given offset cannot be found in the node list.",this,{offset:t,nodeList:this});return this.length}},{key:"_insertNodes",value:function(t,e){var n,i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var u=a.value;if(!(u instanceof at))throw new rt["b"]("model-nodelist-insertNodes-not-node: Trying to insert an object which is not a Node instance.",this)}}catch(l){r=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}(n=this._nodes).splice.apply(n,[t,0].concat(Object(nt["a"])(e)))}},{key:"_removeNodes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._nodes.splice(t,e)}},{key:"toJSON",value:function(){return this._nodes.map((function(t){return t.toJSON()}))}},{key:"length",get:function(){return this._nodes.length}},{key:"maxOffset",get:function(){return this._nodes.reduce((function(t,e){return t+e.offsetSize}),0)}}]),t}(),ct=n("e907"),ht=function(t){function e(t,n,i){var r;return Object(x["a"])(this,e),r=Object(T["a"])(this,Object(S["a"])(e).call(this,n)),r.name=t,r._children=new lt,i&&r._insertChild(0,i),r}return Object(I["a"])(e,t),Object(P["a"])(e,[{key:"is",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=t.replace(/^model:/,"");return n?"element"==i&&n==this.name:"element"==i||i==this.name||Object(et["a"])(Object(S["a"])(e.prototype),"is",this).call(this,t)}},{key:"getChild",value:function(t){return this._children.getNode(t)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"getChildIndex",value:function(t){return this._children.getNodeIndex(t)}},{key:"getChildStartOffset",value:function(t){return this._children.getNodeStartOffset(t)}},{key:"offsetToIndex",value:function(t){return this._children.offsetToIndex(t)}},{key:"getNodeByPath",value:function(t){var e=this,n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e=e.getChild(e.offsetToIndex(s))}}catch(u){i=!0,r=u}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return e}},{key:"toJSON",value:function(){var t=Object(et["a"])(Object(S["a"])(e.prototype),"toJSON",this).call(this);if(t.name=this.name,this._children.length>0){t.children=[];var n=!0,i=!1,r=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.children.push(s.toJSON())}}catch(u){i=!0,r=u}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}return t}},{key:"_clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=t?Array.from(this._children).map((function(t){return t._clone(!0)})):null;return new e(this.name,this.getAttributes(),n)}},{key:"_appendChild",value:function(t){this._insertChild(this.childCount,t)}},{key:"_insertChild",value:function(t,e){var n=ft(e),i=!0,r=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var u=a.value;null!==u.parent&&u._remove(),u.parent=this}}catch(l){r=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}this._children._insertNodes(t,n)}},{key:"_removeChildren",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this._children._removeNodes(t,e),i=!0,r=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var u=a.value;u.parent=null}}catch(l){r=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}},{key:"childCount",get:function(){return this._children.length}},{key:"maxOffset",get:function(){return this._children.maxOffset}},{key:"isEmpty",get:function(){return 0===this.childCount}}],[{key:"fromJSON",value:function(t){var n=null;if(t.children){n=[];var i=!0,r=!1,o=void 0;try{for(var a,s=t.children[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var u=a.value;u.name?n.push(e.fromJSON(u)):n.push(st.fromJSON(u))}}catch(l){r=!0,o=l}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}return new e(t.name,t.attributes,n)}}]),e}(at);function ft(t){return"string"==typeof t?[new st(t)]:(Object(ct["a"])(t)||(t=[t]),Array.from(t).map((function(t){return"string"==typeof t?new st(t):t instanceof ut?new st(t.data,t.getAttributes()):t})))}
/**
 * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */var dt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(x["a"])(this,t),!e.boundaries&&!e.startPosition)throw new rt["b"]("model-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.",null);var n=e.direction||"forward";if("forward"!=n&&"backward"!=n)throw new rt["b"]("model-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.",e,{direction:n});this.direction=n,this.boundaries=e.boundaries||null,e.startPosition?this.position=e.startPosition.clone():this.position=mt._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}return Object(P["a"])(t,[{key:Symbol.iterator,value:function(){return this}},{key:"skip",value:function(t){var e,n,i,r;do{i=this.position,r=this._visitedParent;var o=this.next();e=o.done,n=o.value}while(!e&&t(n));e||(this.position=i,this._visitedParent=r)}},{key:"next",value:function(){return"forward"==this.direction?this._next():this._previous()}},{key:"_next",value:function(){var t=this.position,e=this.position.clone(),n=this._visitedParent;if(null===n.parent&&e.offset===n.maxOffset)return{done:!0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0};var i=e.textNode?e.textNode:e.nodeAfter;if(i instanceof ht)return this.shallow?e.offset++:(e.path.push(0),this._visitedParent=i),this.position=e,vt("elementStart",i,t,e,1);if(i instanceof st){var r;if(this.singleCharacters)r=1;else{var o=i.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<o&&(o=this.boundaries.end.offset),r=o-e.offset}var a=e.offset-i.startOffset,s=new ut(i,a,r);return e.offset+=r,this.position=e,vt("text",s,t,e,r)}return e.path.pop(),e.offset++,this.position=e,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():vt("elementEnd",n,t,e)}},{key:"_previous",value:function(){var t=this.position,e=this.position.clone(),n=this._visitedParent;if(null===n.parent&&0===e.offset)return{done:!0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0};var i=e.textNode?e.textNode:e.nodeBefore;if(i instanceof ht)return e.offset--,this.shallow?(this.position=e,vt("elementStart",i,t,e,1)):(e.path.push(i.maxOffset),this.position=e,this._visitedParent=i,this.ignoreElementEnd?this._previous():vt("elementEnd",i,t,e));if(i instanceof st){var r;if(this.singleCharacters)r=1;else{var o=i.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>o&&(o=this.boundaries.start.offset),r=e.offset-o}var a=e.offset-i.startOffset,s=new ut(i,a-r,r);return e.offset-=r,this.position=e,vt("text",s,t,e,r)}return e.path.pop(),this.position=e,this._visitedParent=n.parent,vt("elementStart",n,t,e,1)}}]),t}();function vt(t,e,n,i,r){return{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:i,length:r}}}var pt=n("a809"),mt=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toNone";if(Object(x["a"])(this,t),!e.is("element")&&!e.is("documentFragment"))throw new rt["b"]("model-position-root-invalid: Position root invalid.",e);if(!(n instanceof Array)||0===n.length)throw new rt["b"]("model-position-path-incorrect-format: Position path must be an array with at least one item.",e,{path:n});n=e.getPath().concat(n),e=e.root,this.root=e,this.path=n,this.stickiness=i}return Object(P["a"])(t,[{key:"compareWith",value:function(t){if(this.root!=t.root)return"different";var e=Object(ot["a"])(this.path,t.path);switch(e){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[e]<t.path[e]?"before":"after"}}},{key:"getLastMatchingPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.startPosition=this;var n=new dt(e);return n.skip(t),n.position}},{key:"getParentPath",value:function(){return this.path.slice(0,-1)}},{key:"getAncestors",value:function(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}},{key:"getCommonPath",value:function(t){if(this.root!=t.root)return[];var e=Object(ot["a"])(this.path,t.path),n="string"==typeof e?Math.min(this.path.length,t.path.length):e;return this.path.slice(0,n)}},{key:"getCommonAncestor",value:function(t){var e=this.getAncestors(),n=t.getAncestors(),i=0;while(e[i]==n[i]&&e[i])i++;return 0===i?null:e[i-1]}},{key:"getShiftedBy",value:function(t){var e=this.clone(),n=e.offset+t;return e.offset=n<0?0:n,e}},{key:"isAfter",value:function(t){return"after"==this.compareWith(t)}},{key:"isBefore",value:function(t){return"before"==this.compareWith(t)}},{key:"isEqual",value:function(t){return"same"==this.compareWith(t)}},{key:"isTouching",value:function(e){var n=null,i=null,r=this.compareWith(e);switch(r){case"same":return!0;case"before":n=t._createAt(this),i=t._createAt(e);break;case"after":n=t._createAt(e),i=t._createAt(this);break;default:return!1}var o=n.parent;while(n.path.length+i.path.length){if(n.isEqual(i))return!0;if(n.path.length>i.path.length){if(n.offset!==o.maxOffset)return!1;n.path=n.path.slice(0,-1),o=o.parent,n.offset++}else{if(0!==i.offset)return!1;i.path=i.path.slice(0,-1)}}}},{key:"is",value:function(t){return"position"==t||"model:position"==t}},{key:"hasSameParentAs",value:function(t){if(this.root!==t.root)return!1;var e=this.getParentPath(),n=t.getParentPath();return"same"==Object(ot["a"])(e,n)}},{key:"getTransformedByOperation",value:function(e){var n;switch(e.type){case"insert":n=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":n=this._getTransformedByMoveOperation(e);break;case"split":n=this._getTransformedBySplitOperation(e);break;case"merge":n=this._getTransformedByMergeOperation(e);break;default:n=t._createAt(this);break}return n}},{key:"_getTransformedByInsertOperation",value:function(t){return this._getTransformedByInsertion(t.position,t.howMany)}},{key:"_getTransformedByMoveOperation",value:function(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}},{key:"_getTransformedBySplitOperation",value:function(t){var e=t.movedRange,n=e.containsPosition(this)||e.start.isEqual(this)&&"toNext"==this.stickiness;return n?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1)}},{key:"_getTransformedByMergeOperation",value:function(e){var n,i=e.movedRange,r=i.containsPosition(this)||i.start.isEqual(this);return r?(n=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(n=n._getTransformedByDeletion(e.deletionPosition,1))):n=this.isEqual(e.deletionPosition)?t._createAt(e.deletionPosition):this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),n}},{key:"_getTransformedByDeletion",value:function(e,n){var i=t._createAt(this);if(this.root!=e.root)return i;if("same"==Object(ot["a"])(e.getParentPath(),this.getParentPath())){if(e.offset<this.offset){if(e.offset+n>this.offset)return null;i.offset-=n}}else if("prefix"==Object(ot["a"])(e.getParentPath(),this.getParentPath())){var r=e.path.length-1;if(e.offset<=this.path[r]){if(e.offset+n>this.path[r])return null;i.path[r]-=n}}return i}},{key:"_getTransformedByInsertion",value:function(e,n){var i=t._createAt(this);if(this.root!=e.root)return i;if("same"==Object(ot["a"])(e.getParentPath(),this.getParentPath()))(e.offset<this.offset||e.offset==this.offset&&"toPrevious"!=this.stickiness)&&(i.offset+=n);else if("prefix"==Object(ot["a"])(e.getParentPath(),this.getParentPath())){var r=e.path.length-1;e.offset<=this.path[r]&&(i.path[r]+=n)}return i}},{key:"_getTransformedByMove",value:function(e,n,i){if(n=n._getTransformedByDeletion(e,i),e.isEqual(n))return t._createAt(this);var r=this._getTransformedByDeletion(e,i),o=null===r||e.isEqual(this)&&"toNext"==this.stickiness||e.getShiftedBy(i).isEqual(this)&&"toPrevious"==this.stickiness;return o?this._getCombined(e,n):r._getTransformedByInsertion(n,i)}},{key:"_getCombined",value:function(e,n){var i=e.path.length-1,r=t._createAt(n);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[i]-e.offset,r.path=r.path.concat(this.path.slice(i+1)),r}},{key:"toJSON",value:function(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}},{key:"clone",value:function(){return new this.constructor(this.root,this.path,this.stickiness)}},{key:"offset",get:function(){return Object(pt["a"])(this.path)},set:function(t){this.path[this.path.length-1]=t}},{key:"parent",get:function(){for(var t=this.root,e=0;e<this.path.length-1;e++)if(t=t.getChild(t.offsetToIndex(this.path[e])),!t)throw new rt["b"]("model-position-path-incorrect: The position's path is incorrect.",this,{position:this});if(t.is("text"))throw new rt["b"]("model-position-path-incorrect: The position's path is incorrect.",this,{position:this});return t}},{key:"index",get:function(){return this.parent.offsetToIndex(this.offset)}},{key:"textNode",get:function(){var t=this.parent.getChild(this.index);return t instanceof st&&t.startOffset<this.offset?t:null}},{key:"nodeAfter",get:function(){return null===this.textNode?this.parent.getChild(this.index):null}},{key:"nodeBefore",get:function(){return null===this.textNode?this.parent.getChild(this.index-1):null}},{key:"isAtStart",get:function(){return 0===this.offset}},{key:"isAtEnd",get:function(){return this.offset==this.parent.maxOffset}}],[{key:"_createAt",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toNone";if(e instanceof t)return new t(e.root,e.path,e.stickiness);var r=e;if("end"==n)n=r.maxOffset;else{if("before"==n)return this._createBefore(r,i);if("after"==n)return this._createAfter(r,i);if(0!==n&&!n)throw new rt["b"]("model-createPositionAt-offset-required: Model#createPositionAt() requires the offset when the first parameter is a model item.",[this,e])}if(!r.is("element")&&!r.is("documentFragment"))throw new rt["b"]("model-position-parent-incorrect: Position parent have to be a element or document fragment.",[this,e]);var o=r.getPath();return o.push(n),new this(r.root,o,i)}},{key:"_createAfter",value:function(t,e){if(!t.parent)throw new rt["b"]("model-position-after-root: You cannot make a position after root.",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,e)}},{key:"_createBefore",value:function(t,e){if(!t.parent)throw new rt["b"]("model-position-before-root: You cannot make a position before root.",t,{root:t});return this._createAt(t.parent,t.startOffset,e)}},{key:"fromJSON",value:function(e,n){if("$graveyard"===e.root){var i=new t(n.graveyard,e.path);return i.stickiness=e.stickiness,i}if(!n.getRoot(e.root))throw new rt["b"]("model-position-fromjson-no-root: Cannot create position for document. Root with specified name does not exist.",n,{rootName:e.root});return new t(n.getRoot(e.root),e.path,e.stickiness)}}]),t}(),gt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(x["a"])(this,t),this.start=mt._createAt(e),this.end=n?mt._createAt(n):mt._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}return Object(P["a"])(t,[{key:Symbol.iterator,value:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.delegateYield(new dt({boundaries:this,ignoreElementEnd:!0}),"t0",1);case 1:case"end":return t.stop()}}),t,this)}))},{key:"containsPosition",value:function(t){return t.isAfter(this.start)&&t.isBefore(this.end)}},{key:"containsRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.isCollapsed&&(e=!1);var n=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),i=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return n&&i}},{key:"containsItem",value:function(t){var e=mt._createBefore(t);return this.containsPosition(e)||this.start.isEqual(e)}},{key:"is",value:function(t){return"range"==t||"model:range"==t}},{key:"isEqual",value:function(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}},{key:"isIntersecting",value:function(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}},{key:"getDifference",value:function(e){var n=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&n.push(new t(this.start,e.start)),this.containsPosition(e.end)&&n.push(new t(e.end,this.end))):n.push(new t(this.start,this.end)),n}},{key:"getIntersection",value:function(e){if(this.isIntersecting(e)){var n=this.start,i=this.end;return this.containsPosition(e.start)&&(n=e.start),this.containsPosition(e.end)&&(i=e.end),new t(n,i)}return null}},{key:"getMinimalFlatRanges",value:function(){var e=[],n=this.start.getCommonPath(this.end).length,i=mt._createAt(this.start),r=i.parent;while(i.path.length>n+1){var o=r.maxOffset-i.offset;0!==o&&e.push(new t(i,i.getShiftedBy(o))),i.path=i.path.slice(0,-1),i.offset++,r=r.parent}while(i.path.length<=this.end.path.length){var a=this.end.path[i.path.length-1],s=a-i.offset;0!==s&&e.push(new t(i,i.getShiftedBy(s))),i.offset=a,i.path.push(0)}return e}},{key:"getWalker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.boundaries=this,new dt(t)}},{key:"getItems",value:regeneratorRuntime.mark((function t(){var e,n,i,r,o,a,s,u,l=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=l.length>0&&void 0!==l[0]?l[0]:{},e.boundaries=this,e.ignoreElementEnd=!0,n=new dt(e),i=!0,r=!1,o=void 0,t.prev=7,a=n[Symbol.iterator]();case 9:if(i=(s=a.next()).done){t.next=16;break}return u=s.value,t.next=13,u.item;case 13:i=!0,t.next=9;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](7),r=!0,o=t.t0;case 22:t.prev=22,t.prev=23,i||null==a.return||a.return();case 25:if(t.prev=25,!r){t.next=28;break}throw o;case 28:return t.finish(25);case 29:return t.finish(22);case 30:case"end":return t.stop()}}),t,this,[[7,18,22,30],[23,,25,29]])}))},{key:"getPositions",value:regeneratorRuntime.mark((function t(){var e,n,i,r,o,a,s,u,l=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},e.boundaries=this,n=new dt(e),t.next=5,n.position;case 5:i=!0,r=!1,o=void 0,t.prev=8,a=n[Symbol.iterator]();case 10:if(i=(s=a.next()).done){t.next=17;break}return u=s.value,t.next=14,u.nextPosition;case 14:i=!0,t.next=10;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](8),r=!0,o=t.t0;case 23:t.prev=23,t.prev=24,i||null==a.return||a.return();case 26:if(t.prev=26,!r){t.next=29;break}throw o;case 29:return t.finish(26);case 30:return t.finish(23);case 31:case"end":return t.stop()}}),t,this,[[8,19,23,31],[24,,26,30]])}))},{key:"getTransformedByOperation",value:function(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new t(this.start,this.end)]}},{key:"getTransformedByOperations",value:function(e){var n=[new t(this.start,this.end)],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0)for(var u=a.value,l=0;l<n.length;l++){var c=n[l].getTransformedByOperation(u);n.splice.apply(n,[l,1].concat(Object(nt["a"])(c))),l+=c.length-1}}catch(p){r=!0,o=p}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}for(var h=0;h<n.length;h++)for(var f=n[h],d=h+1;d<n.length;d++){var v=n[d];(f.containsRange(v)||v.containsRange(f)||f.isEqual(v))&&n.splice(d,1)}return n}},{key:"getCommonAncestor",value:function(){return this.start.getCommonAncestor(this.end)}},{key:"toJSON",value:function(){return{start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"clone",value:function(){return new this.constructor(this.start,this.end)}},{key:"_getTransformedByInsertOperation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._getTransformedByInsertion(t.position,t.howMany,e)}},{key:"_getTransformedByMoveOperation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.sourcePosition,i=t.howMany,r=t.targetPosition;return this._getTransformedByMove(n,r,i,e)}},{key:"_getTransformedBySplitOperation",value:function(e){var n=this.start._getTransformedBySplitOperation(e),i=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(i=this.end.getShiftedBy(1)),n.root!=i.root&&(i=this.end.getShiftedBy(-1)),new t(n,i)}},{key:"_getTransformedByMergeOperation",value:function(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new t(this.start);var n=this.start._getTransformedByMergeOperation(e),i=this.end._getTransformedByMergeOperation(e);return n.root!=i.root&&(i=this.end.getShiftedBy(-1)),n.isAfter(i)?(e.sourcePosition.isBefore(e.targetPosition)?(n=mt._createAt(i),n.offset=0):(e.deletionPosition.isEqual(n)||(i=e.deletionPosition),n=e.targetPosition),new t(n,i)):new t(n,i)}},{key:"_getTransformedByInsertion",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(i&&this.containsPosition(e))return[new t(this.start,e),new t(e.getShiftedBy(n),this.end._getTransformedByInsertion(e,n))];var r=new t(this.start,this.end);return r.start=r.start._getTransformedByInsertion(e,n),r.end=r.end._getTransformedByInsertion(e,n),[r]}},{key:"_getTransformedByMove",value:function(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.isCollapsed){var o=this.start._getTransformedByMove(e,n,i);return[new t(o)]}var a,s=t._createFromPositionAndShift(e,i),u=n._getTransformedByDeletion(e,i);if(this.containsPosition(n)&&!r&&(s.containsPosition(this.start)||s.containsPosition(this.end))){var l=this.start._getTransformedByMove(e,n,i),c=this.end._getTransformedByMove(e,n,i);return[new t(l,c)]}var h=this.getDifference(s),f=null,d=this.getIntersection(s);if(1==h.length?f=new t(h[0].start._getTransformedByDeletion(e,i),h[0].end._getTransformedByDeletion(e,i)):2==h.length&&(f=new t(this.start,this.end._getTransformedByDeletion(e,i))),a=f?f._getTransformedByInsertion(u,i,null!==d||r):[],d){var v=new t(d.start._getCombined(s.start,u),d.end._getCombined(s.start,u));2==a.length?a.splice(1,0,v):a.push(v)}return a}},{key:"_getTransformedByDeletion",value:function(e,n){var i=this.start._getTransformedByDeletion(e,n),r=this.end._getTransformedByDeletion(e,n);return null==i&&null==r?null:(null==i&&(i=e),null==r&&(r=e),new t(i,r))}},{key:"isCollapsed",get:function(){return this.start.isEqual(this.end)}},{key:"isFlat",get:function(){var t=this.start.getParentPath(),e=this.end.getParentPath();return"same"==Object(ot["a"])(t,e)}},{key:"root",get:function(){return this.start.root}}],[{key:"_createFromPositionAndShift",value:function(t,e){var n=t,i=t.getShiftedBy(e);return e>0?new this(n,i):new this(i,n)}},{key:"_createIn",value:function(t){return new this(mt._createAt(t,0),mt._createAt(t,t.maxOffset))}},{key:"_createOn",value:function(t){return this._createFromPositionAndShift(mt._createBefore(t),t.offsetSize)}},{key:"_createFromRanges",value:function(t){if(0===t.length)throw new rt["b"]("range-create-from-ranges-empty-array: At least one range has to be passed.",null);if(1==t.length)return t[0].clone();var e=t[0];t.sort((function(t,e){return t.start.isAfter(e.start)?1:-1}));var n=t.indexOf(e),i=new this(e.start,e.end);if(n>0)for(var r=n-1;1;r++){if(!t[r].end.isEqual(i.start))break;i.start=mt._createAt(t[r].start)}for(var o=n+1;o<t.length;o++){if(!t[o].start.isEqual(i.end))break;i.end=mt._createAt(t[o].end)}return i}},{key:"fromJSON",value:function(t,e){return new this(mt.fromJSON(t.start,e),mt.fromJSON(t.end,e))}}]),t}(),yt=n("da0d"),bt=n("644e"),wt=function(t){function e(t,n){var i;return Object(x["a"])(this,e),i=Object(T["a"])(this,Object(S["a"])(e).call(this,t,n)),kt.call(Object(tt["a"])(i)),i}return Object(I["a"])(e,t),Object(P["a"])(e,[{key:"detach",value:function(){this.stopListening()}},{key:"is",value:function(t){return"liveRange"==t||"model:liveRange"==t||Object(et["a"])(Object(S["a"])(e.prototype),"is",this).call(this,t)}},{key:"toRange",value:function(){return new gt(this.start,this.end)}}],[{key:"fromRange",value:function(t){return new e(t.start,t.end)}}]),e}(gt);
/**
 * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kt(){var t=this;this.listenTo(this.root.document.model,"applyOperation",(function(e,n){var i=n[0];i.isDocumentOperation&&_t.call(t,i)}),{priority:"low"})}function _t(t){var e=this.getTransformedByOperation(t),n=gt._createFromRanges(e),i=!n.isEqual(this),r=Ot(this,t),o=null;if(i){"$graveyard"==n.root.rootName&&(o="remove"==t.type?t.sourcePosition:t.deletionPosition);var a=this.toRange();this.start=n.start,this.end=n.end,this.fire("change:range",a,{deletionPosition:o})}else r&&this.fire("change:content",this.toRange(),{deletionPosition:o})}function Ot(t,e){switch(e.type){case"insert":return t.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(e.sourcePosition)||t.start.isEqual(e.sourcePosition)||t.containsPosition(e.targetPosition);case"split":return t.containsPosition(e.splitPosition)||t.containsPosition(e.insertionPosition)}return!1}Object(bt["a"])(wt,yt["c"]);
/**
 * @license Copyright (c) 2003-2019, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */
var xt=function(t){function e(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toNone";if(Object(x["a"])(this,e),i=Object(T["a"])(this,Object(S["a"])(e).call(this,t,n,r)),!i.root.is("rootElement"))throw new rt["b"]("model-liveposition-root-not-rootelement: LivePosition's root has to be an instance of RootElement.",t);return Pt.call(Object(tt["a"])(i)),i}return Object(I["a"])(e,t),Object(P["a"])(e,[{key:"detach",value:function(){this.stopListening()}},{key:"is",value:function(t){return"livePosition"==t||"model:livePosition"==t||Object(et["a"])(Object(S["a"])(e.prototype),"is",this).call(this,t)}},{key:"toPosition",value:function(){return new mt(this.root,this.path.slice(),this.stickiness)}}],[{key:"fromPosition",value:function(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}]),e}(mt);function Pt(){var t=this;this.listenTo(this.root.document.model,"applyOperation",(function(e,n){var i=n[0];i.isDocumentOperation&&Tt.call(t,i)}),{priority:"low"})}function Tt(t){var e=this.getTransformedByOperation(t);if(!this.isEqual(e)){var n=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",n)}}Object(bt["a"])(xt,yt["c"]);var St=n("8b59"),It=n("a07d"),jt=/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w.-]+)+[\w\-._~:/?#[\]@!$&'()*+,;=]+$/,Bt=function(t){function e(t){var n;return Object(x["a"])(this,e),n=Object(T["a"])(this,Object(S["a"])(e).call(this,t)),n._timeoutId=null,n._positionToInsert=null,n}return Object(I["a"])(e,t),Object(P["a"])(e,null,[{key:"requires",get:function(){return[Z["a"],St["a"]]}},{key:"pluginName",get:function(){return"AutoMediaEmbed"}}]),Object(P["a"])(e,[{key:"init",value:function(){var t=this,e=this.editor,n=e.model.document;this.listenTo(e.plugins.get(Z["a"]),"inputTransformation",(function(){var e=n.selection.getFirstRange(),i=xt.fromPosition(e.start);i.stickiness="toPrevious";var r=xt.fromPosition(e.end);r.stickiness="toNext",n.once("change:data",(function(){t._embedMediaBetweenPositions(i,r),i.detach(),r.detach()}),{priority:"high"})})),e.commands.get("undo").on("execute",(function(){t._timeoutId&&(It["a"].window.clearTimeout(t._timeoutId),t._positionToInsert.detach(),t._timeoutId=null,t._positionToInsert=null)}),{priority:"high"})}},{key:"_embedMediaBetweenPositions",value:function(t,e){var n=this,i=this.editor,r=i.plugins.get(X).registry,o=new wt(t,e),a=o.getWalker({ignoreElementEnd:!0}),s="",u=!0,l=!1,c=void 0;try{for(var h,f=a[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var d=h.value;d.item.is("textProxy")&&(s+=d.item.data)}}catch(p){l=!0,c=p}finally{try{u||null==f.return||f.return()}finally{if(l)throw c}}if(s=s.trim(),s.match(jt)&&r.hasMedia(s)){var v=i.commands.get("mediaEmbed");v.isEnabled&&(this._positionToInsert=xt.fromPosition(t),this._timeoutId=It["a"].window.setTimeout((function(){i.model.change((function(t){var e;n._timeoutId=null,t.remove(o),"$graveyard"!==n._positionToInsert.root.rootName&&(e=n._positionToInsert),D(i.model,s,e),n._positionToInsert.detach(),n._positionToInsert=null}))}),100))}}}]),e}(j["a"]),Vt=n("ceea"),Et=n("940e"),At=n("3493"),Nt=n("3707"),Ct=n("9374"),Dt=n("fdf0"),Mt=n("ab1f"),zt=n("768b3"),qt=n("0d02"),Rt=n("91db"),Ft=n("18ce"),$t=n.n(Ft),Ut=n("8ef8"),Ht=n.n(Ut),Jt=(n("6eb8"),function(t){function e(t,n){var i;Object(x["a"])(this,e),i=Object(T["a"])(this,Object(S["a"])(e).call(this,n));var r=n.t;return i.focusTracker=new zt["a"],i.keystrokes=new Rt["a"],i.urlInputView=i._createUrlInput(),i.saveButtonView=i._createButton(r("保存"),$t.a,"ck-button-save"),i.saveButtonView.type="submit",i.cancelButtonView=i._createButton(r("取消"),Ht.a,"ck-button-cancel","cancel"),i._focusables=new At["a"],i._focusCycler=new qt["a"]({focusables:i._focusables,focusTracker:i.focusTracker,keystrokeHandler:i.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),i._validators=t,i.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form"],tabindex:"-1"},children:[i.urlInputView,i.saveButtonView,i.cancelButtonView]}),i}return Object(I["a"])(e,t),Object(P["a"])(e,[{key:"render",value:function(){var t=this;Object(et["a"])(Object(S["a"])(e.prototype),"render",this).call(this),Object(Mt["a"])({view:this});var n=[this.urlInputView,this.saveButtonView,this.cancelButtonView];n.forEach((function(e){t._focusables.add(e),t.focusTracker.add(e.element)})),this.keystrokes.listenTo(this.element);var i=function(t){return t.stopPropagation()};this.keystrokes.set("arrowright",i),this.keystrokes.set("arrowleft",i),this.keystrokes.set("arrowup",i),this.keystrokes.set("arrowdown",i),this.listenTo(this.urlInputView.element,"selectstart",(function(t,e){e.stopPropagation()}),{priority:"high"})}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"isValid",value:function(){this.resetFormStatus();var t=!0,e=!1,n=void 0;try{for(var i,r=this._validators[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value,a=o(this);if(a)return this.urlInputView.errorText=a,!1}}catch(s){e=!0,n=s}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}return!0}},{key:"resetFormStatus",value:function(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}},{key:"_createUrlInput",value:function(){var t=this,e=this.locale.t,n=new Ct["a"](this.locale,Dt["a"]),i=n.inputView;return this._urlInputViewInfoDefault=e("请把视频链接粘贴至这里"),this._urlInputViewInfoTip=e("提示：支持视频文件链接、优酷外链"),n.label=e("媒体URL"),n.infoText=this._urlInputViewInfoDefault,i.placeholder="支持视频文件链接、优酷外链",i.on("input",(function(){n.infoText=i.element.value?t._urlInputViewInfoTip:t._urlInputViewInfoDefault})),n}},{key:"_createButton",value:function(t,e,n,i){var r=new Nt["a"](this.locale);return r.set({label:t,icon:e,tooltip:!0}),r.extendTemplate({attributes:{class:n}}),i&&r.delegate("execute").to(this,i),r}},{key:"url",get:function(){return this.urlInputView.inputView.element.value.trim()},set:function(t){this.urlInputView.inputView.element.value=t.trim()}}]),e}(Et["a"])),Lt=n("2116"),Wt=n.n(Lt),Gt=function(t){function e(){return Object(x["a"])(this,e),Object(T["a"])(this,Object(S["a"])(e).apply(this,arguments))}return Object(I["a"])(e,t),Object(P["a"])(e,[{key:"init",value:function(){var t=this,e=this.editor,n=e.commands.get("mediaEmbed"),i=e.plugins.get(X).registry;this.form=new Jt(Kt(e.t,i),e.locale),e.ui.componentFactory.add("mediaEmbed",(function(i){var r=Object(Vt["b"])(i);return t._setUpDropdown(r,t.form,n,e),t._setUpForm(t.form,r,n),r}))}},{key:"_setUpDropdown",value:function(t,e,n){var i=this.editor,r=i.t,o=t.buttonView;function a(){i.editing.view.focus(),t.isOpen=!1}t.bind("isEnabled").to(n),t.panelView.children.add(e),o.set({label:r("插入媒体"),icon:Wt.a,tooltip:!0}),o.on("open",(function(){e.url=n.value||"",e.urlInputView.select(),e.focus()}),{priority:"low"}),t.on("submit",(function(){e.isValid()&&(i.execute("mediaEmbed",e.url),a())})),t.on("change:isOpen",(function(){return e.resetFormStatus()})),t.on("cancel",(function(){return a()}))}},{key:"_setUpForm",value:function(t,e,n){t.delegate("submit","cancel").to(e),t.urlInputView.bind("value").to(n,"value"),t.urlInputView.bind("isReadOnly").to(n,"isEnabled",(function(t){return!t})),t.saveButtonView.bind("isEnabled").to(n)}}],[{key:"requires",get:function(){return[X]}},{key:"pluginName",get:function(){return"MediaEmbedUI"}}]),e}(j["a"]);function Kt(t,e){return[function(e){if(!e.url.length)return t("URL不可以为空。")},function(n){if(!e.hasMedia(n.url))return t("不支持此媒体URL。")}]}var Yt=n("bf50"),Qt=(n("d05f"),function(t){function e(){return Object(x["a"])(this,e),Object(T["a"])(this,Object(S["a"])(e).apply(this,arguments))}return Object(I["a"])(e,t),Object(P["a"])(e,null,[{key:"requires",get:function(){return[X,Gt,Bt,Yt["a"]]}},{key:"pluginName",get:function(){return"MediaEmbed"}}]),e}(j["a"])),Xt=n("c437"),Zt=n.n(Xt),te={data:function(){return{courseID:"",chapter:0,part:0,tchID:"",editor:a["a"],editorData:"",editorConfig:{plugins:[s["a"],u["a"],l["a"],c["a"],h["a"],f["a"],d["a"],v["a"],p["a"],m["a"],g["a"],y["a"],b["a"],w["a"],k["a"],_["a"],O["a"],Qt],toolbar:{items:["heading","|","link","imageUpload","mediaEmbed","|","bold","italic","fontSize","underline","superscript","code","|","alignment:left","alignment:right","alignment:center","alignment:justify","|","undo","redo"]},ckfinder:{uploadUrl:"".concat(this.$serverBaseUrl,"/api/uploadCourseImg?courseID=").concat(this.$route.query.id,"&chapter=").concat(this.$route.query.c,"&part=").concat(this.$route.query.p),options:{resourceType:".jpg,.jpeg,.png"}}},partInfo:{title:""},partInfoRules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}]},videoes:[],uploadVideoScuessDialogVis:!1,uploadVideoScuessUrl:{},uploadVideoScuessName:""}},props:{user:{type:Object,default:{}}},created:function(){this.chapter=parseInt(this.$route.query.c),this.part=parseInt(this.$route.query.p),this.courseID=this.$route.query.id,this.tchID=this.user.id,this.getPartDetail()},methods:{encodeFilename:function(t){return t.replace(/\+/g,"%2B").replace(/ /g,"-").replace(/\//g,"%2F").replace(/\?/g,"%3F").replace(/#/g,"%23").replace(/&/g,"%26").replace(/=/g,"%3D")},decodeFilename:function(t){return t.replace(/%2B/g,"+").replace(/%2F/g,"/").replace(/%3F/g,"?").replace(/%23/g,"#").replace(/%26/g,"&").replace(/%3D/g,"=")},getPartDetail:function(){var t=this;o["b"].getPartDetail({courseID:this.courseID,chapter:this.chapter,part:this.part}).then((function(e){1===e.data.code&&(t.partInfo.title=e.data.data.title,t.editorData=e.data.data.content||"",t.videoes=e.data.data.videoes,t.videoes.forEach((function(e){t.uploadVideoScuessUrl[e.name]=e.url}))),-1===e.data.code&&(console.log(e.data.errMsg),t.$confirm("加载失败, 是否重新加载?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push({path:"/emptyPage"})})).catch((function(){})))})).catch((function(e){console.log(e),t.$confirm("加载失败, 是否重新加载?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push({path:"/emptyPage"})})).catch((function(){}))}))},updatePart:function(){var t=this;if(!this.partInfo.title)return null;this.$confirm("此操作将发布/更新该单元内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o["b"].updatePart({courseID:t.courseID,chapter:t.chapter,part:t.part,title:t.partInfo.title,content:t.editorData,tchID:t.tchID}).then((function(e){1===e.data.code&&t.$router.push({path:"/course/".concat(t.courseID,"/index")}),0===e.data.code&&t.$message({message:e.data.info,type:"warning"}),-1===e.data.code&&(t.$alert("发生了错误导致该操作执行失败","发生错误",{confirmButtonText:"确定"}),console.log(e.data.errMsg))})).catch((function(t){console.log(t)}))})).catch((function(){}))},checkVideoUrl:function(t){this.uploadVideoScuessName=this.encodeFilename(t.name),this.uploadVideoScuessDialogVis=!0},delVideo:function(t,e){var n=this;this.videoes.push({}),this.videoes.pop(),this.$confirm("此操作将删除该视频, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o["b"].delCourseVideo({filename:t.name,courseID:n.courseID,chapter:n.chapter,part:n.part,tchID:n.tchID}).then((function(e){1===e.data.code&&(n.$message({type:"success",message:"删除成功!"}),n.videoes=n.videoes.filter((function(e){return e.name!==t.name}))),-1===e.data.code&&(n.$alert("发生了错误导致视频删除失败","删除失败",{confirmButtonText:"确定"}),console.log(e.data.errMsg))})).catch((function(t){console.log(t)}))})).catch((function(t){}))},copyUploadVideoScuessUrl:function(){var t=document.getElementById("uploaded-video-url");t.select(),this.uploadVideoScuessDialogVis=!1,document.execCommand("copy")?(document.execCommand("copy"),this.$message({type:"success",message:"视频地址已复制!"})):this.$message({type:"warn",message:"视频地址复制失败!"})},handleUpload:function(t){1===t.data.code&&(this.uploadVideoScuessUrl[this.encodeFilename(t.data.data.filename)]=t.data.data.url,this.uploadVideoScuessName=this.encodeFilename(t.data.data.filename),this.uploadVideoScuessDialogVis=!0),-1===t.data.code&&this.$alert("发生了错误导致视频上传失败","上传失败",{confirmButtonText:"确定"})},handleUploadError:function(t){this.$alert("发生了错误导致视频上传失败","上传失败",{confirmButtonText:"确定"}),console.log(t)},uploadVideo:function(t){for(var e=this,n=t.file,i=52428800,r=Math.ceil(n.size/i),a=[],s=n.name.split(".").slice(-1)[0],u=Zt()(),l=[],c=function(r){var o=r*i,s=Math.min(n.size,o+i),c=new FormData;c.append("file",n.slice(o,s)),c.append("index",r),c.append("hash",u),a.push(e.$http.request({url:"api/uploadCourseVideoChunks",method:"post",data:c,onUploadProgress:function(e){l[r]=e.loaded;var i=l.reduce((function(t,e){return t+e})),o=i/n.size*100|0;t.onProgress({percent:100===o?99:o})}}))},h=0;h<r;h++)c(h);return this.$http.all(a).then((function(){var t={name:n.name,total:r,ext:s,hash:u,courseID:e.courseID,chapter:e.chapter,part:e.part};o["b"].mergeCourseVideoChunks(t).then(e.handleUpload,e.handleUploadError)}))}}},ee=te,ne=(n("f964"),n("2877")),ie=Object(ne["a"])(ee,i,r,!1,null,null,null);e["default"]=ie.exports},c437:function(t,e,n){var i,r,o=n("e1f4"),a=n("2366"),s=0,u=0;function l(t,e,n){var l=e&&n||0,c=e||[];t=t||{};var h=t.node||i,f=void 0!==t.clockseq?t.clockseq:r;if(null==h||null==f){var d=o();null==h&&(h=i=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==f&&(f=r=16383&(d[6]<<8|d[7]))}var v=void 0!==t.msecs?t.msecs:(new Date).getTime(),p=void 0!==t.nsecs?t.nsecs:u+1,m=v-s+(p-u)/1e4;if(m<0&&void 0===t.clockseq&&(f=f+1&16383),(m<0||v>s)&&void 0===t.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=v,u=p,r=f,v+=122192928e5;var g=(1e4*(268435455&v)+p)%4294967296;c[l++]=g>>>24&255,c[l++]=g>>>16&255,c[l++]=g>>>8&255,c[l++]=255&g;var y=v/4294967296*1e4&268435455;c[l++]=y>>>8&255,c[l++]=255&y,c[l++]=y>>>24&15|16,c[l++]=y>>>16&255,c[l++]=f>>>8|128,c[l++]=255&f;for(var b=0;b<6;++b)c[l+b]=h[b];return e||a(c)}t.exports=l},d05f:function(t,e,n){},e1f4:function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);t.exports=function(){return n(i),i}}else{var r=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r}}},f964:function(t,e,n){"use strict";var i=n("4180"),r=n.n(i);r.a}}]);
//# sourceMappingURL=chunk-4391c940.f9dbc1b8.js.map