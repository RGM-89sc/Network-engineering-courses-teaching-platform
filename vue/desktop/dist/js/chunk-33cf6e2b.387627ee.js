(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33cf6e2b"],{"74f7":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"news-detail"},[i("article",{staticClass:"news-article"},[i("h1",{staticClass:"article__title"},[t._v(t._s(t.article.title))]),i("el-row",{staticClass:"article__meta sub-font_sub",attrs:{type:"flex",gutter:1}},[i("el-link",{staticClass:"article__author-avatar",attrs:{underline:!1}},[i("img",{attrs:{src:t.article.avatarURL,alt:t.article.authorName}})]),i("div",{staticClass:"article__author-name-time"},[i("el-link",{attrs:{type:"primary"}},[t._v(t._s(t.article.authorName))]),i("div",{staticClass:"article__meta-detail"},[i("div",{staticClass:"article__created item_padding"},[t._v("\n            "+t._s(t.formatDate(t.article.created,t.dayjsNowTime))+"\n          ")]),i("span",{staticClass:"item_padding"},[i("el-icon",{staticClass:"el-icon-view"}),t._v("\n            "+t._s(t.article.views)+"次浏览   ·")],1),i("el-link",{staticClass:"article__good-btn item_padding",attrs:{underline:!1,type:t.isLiked?"primary":"default"},on:{click:t.likesArticleHandler}},[i("el-icon",{class:t.likesLoading?"el-icon-loading":t.isLiked?"el-icon-star-on":"el-icon-star-off"}),t._v("\n            "+t._s(t.goodsCount)+" 次点赞\n\n          ")],1)],1)],1)],1),i("div",{staticClass:"article__content",domProps:{innerHTML:t._s(t.article.content)}})],1)])},n=[],r=i("915c");function c(t,e,i){var a=i(t),n=e.diff(a),r=Math.ceil(n/1e3/60),c=Math.ceil(r/60),s=Math.ceil(c/24);return r>59?c>23?s>29?a.format("YYYY-MM-DD"):"".concat(s,"天前"):"".concat(c,"小时前"):"".concat(r,"分钟前")}var s=function(){var t=-1;return function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;t>0||(i=-1===t?0:i,t=setTimeout((function(){e(),t=0}),i))}}(),l={props:{user:{type:Object,default:{}}},data:function(){return{article:{},articleType:this.$route.query.articleType||"news",articleID:this.$route.params.article_id,isLiked:!1,replyContent:"",currentReply:"",dayjsNowTime:this.$dayjs(Date.now()),goodsCount:0,likesLoading:!1}},methods:{checkIdentity:function(){return!!this.user.id||(this.$router.push({path:"/auth"}),!1)},formatDate:function(t,e){return c(t,e,this.$dayjs)},getArticle:function(){var t=this;r["a"].getArticle({articleID:this.articleID,articleType:this.articleType}).then((function(e){1===e.data.code&&(t.article=e.data.data,t.goodsCount=t.article.goods.length,t.isLiked=t.article.isLiked)})).catch((function(t){console.error(t)}))},incViewsCount:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];r["a"].incViewsCount({articleID:this.articleID,articleType:this.articleType}).then((function(e){t.article.views++,console.log(e)})).catch((function(t){console.error(t)}))},likesArticleHandler:function(){var t=this;if(!this.checkIdentity())return!1;this.likesLoading=!0,s((function(){var e=function(e){var i=1===e?"doLikes":"cancelLikes";r["a"][i]({articleID:t.articleID,articleType:t.articleType,userID:t.user.id,userType:t.user.userType,userName:t.user.username}).then((function(i){t.goodsCount+=e})).catch((function(t){console.error(t)})).finally((function(e){t.likesLoading=!1}))};t.isLiked?e(-1):e(1),t.isLiked=!t.isLiked}))},handler:function(t){var e=t.currentTarget.dataset.index;this.currentReply!==e&&(this.replyContent="",this.currentReply=e)},updateComments:function(){var t=this;r["a"].updateArticle({type:"comment",articleID:this.articleID}).then((function(e){1===e.data.code&&t.$message({})}))}},created:function(){this.getArticle(),this.incViewsCount()}},o=l,u=(i("ee22"),i("2877")),d=Object(u["a"])(o,a,n,!1,null,"4a6e2438",null);e["default"]=d.exports},bfe1:function(t,e,i){},ee22:function(t,e,i){"use strict";var a=i("bfe1"),n=i.n(a);n.a}}]);
//# sourceMappingURL=chunk-33cf6e2b.387627ee.js.map