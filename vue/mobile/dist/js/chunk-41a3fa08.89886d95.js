(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41a3fa08"],{"2d4b":function(t,e,a){},"5e5e":function(t,e,a){},"7df2":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.user&&1===t.user.userType?a("TchCourseDetail",{attrs:{user:t.user}}):t._e(),t.user&&0===t.user.userType?a("StuCourseDetail",{attrs:{user:t.user}}):t._e()],1)},o=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header"},[a("span",[t._v("统计信息 - "+t._s(t.courseName))])]),0===t.stus.length?a("div",{staticClass:"no-stu"},[a("span",[t._v("暂无数据")])]):t._e(),t._l(t.stus,(function(e,s){return a("Card",{key:s,staticClass:"course-detail",attrs:{round:""}},[a("div",{staticClass:"exam"},[a("md-detail-item",{attrs:{title:"学号",content:e.id}}),a("md-detail-item",{attrs:{title:"姓名",content:e.username}}),a("div",{staticClass:"exams"},[a("span",{staticClass:"title"},[t._v("考试成绩")]),t._l(e.exams,(function(s){return a("div",{key:s.examID,staticClass:"exam"},[a("md-detail-item",{attrs:{title:"试卷",content:s.examName}}),a("md-detail-item",{attrs:{title:"成绩",content:s.examScore}}),a("md-detail-item",{attrs:{title:"操作"}},[a("span",{staticStyle:{color:"#409EFF"},on:{click:function(a){return t.resetStuExam(e.id,s)}}},[t._v("重置成绩")])])],1)}))],2)],1)])}))],2)},n=[],u=(a("ac6a"),a("ae8d")),c={data:function(){return{courseID:"",loadingStusData:!0,courseName:"",courseExams:[],stus:[]}},props:{user:{type:Object,default:{}}},created:function(){this.courseID=this.$route.query.id,this.getCourseStusAndExams()},methods:{getCourseStusAndExams:function(){var t=this;this.$http.post("/api/getCourseStusAndExams",{courseID:this.courseID}).then((function(e){if(1===e.data.code){t.courseExams=e.data.data.exams,t.courseName=e.data.data.course.coursename;var a=e.data.data.course.stus;a.forEach((function(e){var a,s;e.study.some((function(e){return e.courseID===t.courseID&&(a=e.progress,s=e.exams,!0)})),t.stus.push({id:e.id,username:e.username,progress:a,exams:s}),t.stus.forEach((function(e,a){var s=[];t.courseExams.forEach((function(t){var a="-";e.exams.some((function(e){return e.examID===t.examID&&(a=e.examScore,!0)})),s.push({examID:t.examID,examName:t.examName,examScore:a})})),t.stus[a].exams=s}))})),t.loadingStusData=!1}-1===e.data.code&&t.$toast.failed("加载失败")})).catch((function(e){console.log(e),t.$toast.failed("加载失败")}))},resetStuExam:function(t,e){var a=this;this.$dialog.confirm({title:"提示",content:"将把该生的该考试成绩重置并不可撤销，学生需重新考试, 是否继续?",confirmText:"确定",onConfirm:function(){var s=!1;if("-"===e.examScore&&(s=!0),s)return a.$toast.info("该生未参与该考试，无需重置"),null;a.$http.post("/api/resetStuExamScore",{stuID:t,courseID:a.courseID,examID:e.examID}).then((function(s){var o,r;1===s.data.code&&(a.stus.some((function(e,a){return e.id===t&&(o=a,!0)})),a.stus[o].exams.some((function(t,a){return t.examID===e.examID&&(r=a,!0)})),a.stus[o].exams[r].examScore="-",a.$toast.succeed("重置成功"));-1===s.data.code&&(console.log(s.data.errMsg),a.$toast.failed("发生错误，操作失败"))})).catch((function(t){console.log(t),a.$toast.failed("发生错误，操作失败")}))}})}},components:{Card:u["a"]}},i=c,d=(a("9dad"),a("2877")),m=Object(d["a"])(i,r,n,!1,null,"3dfe8b51",null),l=m.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",{staticClass:"course-detail",attrs:{round:""}},[a("div",{staticClass:"header"},[a("span",[t._v("统计信息 - "+t._s(t.courseName))])]),0===t.courseExams.length?a("div",{staticClass:"no-exam"},[a("span",[t._v("暂无数据")])]):t._e(),t._l(t.courseExams,(function(t,e){return a("div",{key:e,staticClass:"exam"},[a("md-detail-item",{attrs:{title:"试卷",content:t.examName}}),a("md-detail-item",{attrs:{title:"成绩",content:t.examScore}})],1)}))],2)],1)},x=[],h={data:function(){return{courseID:"",loadingData:!0,courseName:"",courseExams:[]}},props:{user:{type:Object,default:{}}},created:function(){this.courseID=this.$route.query.id,this.getMyCourseExams()},methods:{getMyCourseExams:function(){var t=this;this.$http.post("/api/getMyCourseExams",{courseID:this.courseID}).then((function(e){1===e.data.code&&(t.courseName=e.data.data.course.coursename,e.data.data.exams.forEach((function(a){var s="-";e.data.data.stu.exams.some((function(t){return t.examID===a.examID&&(s=t.examScore,!0)})),t.courseExams.push({examName:a.examName,examScore:s})})),t.loadingData=!1),-1===e.data.code&&(console.log(e.data.errMsg),t.$toast.failed("加载失败"))})).catch((function(e){console.log(e),t.$toast.failed("加载失败")}))}},components:{Card:u["a"]}},p=h,v=(a("aa75"),Object(d["a"])(p,f,x,!1,null,"dea34ede",null)),D=v.exports,C={data:function(){return{}},props:{user:{type:Object,default:{}}},components:{TchCourseDetail:l,StuCourseDetail:D}},E=C,I=Object(d["a"])(E,s,o,!1,null,"591430a6",null);e["default"]=I.exports},"9dad":function(t,e,a){"use strict";var s=a("5e5e"),o=a.n(s);o.a},aa75:function(t,e,a){"use strict";var s=a("c696"),o=a.n(s);o.a},ae8d:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card",class:{"is-always-shadow":"always"===t.shadow,"is-hover-shadow":"hover"===t.shadow,border:t.border,round:t.round}},[t._t("default")],2)},o=[],r={props:{border:{type:Boolean,default:!1},round:{type:Boolean,default:!1},shadow:{type:String,default:"never"}}},n=r,u=(a("b86e"),a("2877")),c=Object(u["a"])(n,s,o,!1,null,"68c27dfd",null);e["a"]=c.exports},b86e:function(t,e,a){"use strict";var s=a("2d4b"),o=a.n(s);o.a},c696:function(t,e,a){}}]);
//# sourceMappingURL=chunk-41a3fa08.89886d95.js.map