(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f9994d24"],{1444:function(t,e,a){},1751:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"course-exam__wrapper gray-bg"},[a("Card",{attrs:{round:""}},[a("div",{staticClass:"header"},[a("span",{staticClass:"title"},[t._v(t._s(t.courseName))]),t.user&&1===t.user.userType?a("div",{staticClass:"tool-bar"}):t._e()]),0===t.examPapers.length?a("div",{staticClass:"no-exam-paper"},[a("span",[t._v("暂无考试")])]):t._e(),t._l(t.examPapers,(function(e){return a("md-cell-item",{key:e.examID,attrs:{title:e.examName,arrow:"",brief:"考试有效期："+t.$dayjs(e.startTime).format("YYYY/MM/DD HH:mm:ss")+" - "+t.$dayjs(e.endTime).format("YYYY/MM/DD HH:mm:ss")},on:{click:function(a){return t.enterExam(e)}}})}))],2)],1)},r=[],i=a("ae8d"),s={data:function(){return{courseID:"",courseName:"",examPapers:[],settingExam:!1,currentSettingExam:{examTiming:60,startEndTime:[]}}},props:{user:{type:Object,default:{}}},created:function(){this.courseID=this.$route.params.course_id,this.courseName=window.sessionStorage.getItem("exams.current_coursename"),this.getExamPapers()},methods:{getExamPapers:function(){var t=this;this.$http.post("/api/getExamPapers",{courseID:this.courseID}).then((function(e){1===e.data.code&&(t.examPapers=e.data.data)})).catch((function(t){console.log(t)}))},enterExam:function(t){var e=this,a=new Date;if(a<new Date(t.startTime)||a>new Date(t.endTime)-60*t.examTiming*1e3)return this.$dialog.failed({title:"无法进入考试",content:"不在该考试有效期内！",confirmText:"确定",onConfirm:function(){}}),null;!this.user||1!==this.user.userType&&0!==this.user.userType?this.$router.push({path:"/auth"}):this.$http.post("/api/checkStuCanEnterExam",{courseID:this.courseID,examID:t.examID}).then((function(a){if(1===a.data.code){if(!a.data.data.canEnterExam)return e.$dialog.failed({title:"无法进入考试",content:a.data.data.reason,confirmText:"确定",onConfirm:function(){}}),null;e.$router.push({path:"/course/".concat(e.$route.params.course_id,"/exam/examPaper?id=").concat(t.examID,"&time=").concat(Date.now())})}-1===a.data.code&&(console.log(a.data.errMsg),e.$dialog.failed({title:"进入考试失败",content:"发生了错误导致进入考试失败",confirmText:"确定",onConfirm:function(){}}))})).catch((function(t){console.log(t)}))},openSetExamDialog:function(t){this.$set(this.currentSettingExam,"examTiming",t.examTiming),this.$set(this.currentSettingExam,"startEndTime",[t.startTime,t.endTime]),this.$set(this.currentSettingExam,"examID",t.examID),this.settingExam=!0},updateExamPaper:function(){var t=this;(this.currentSettingExam.startEndTime[1]-this.currentSettingExam.startEndTime[0])/1e3/60<this.currentSettingExam.examTiming?this.$message({message:"考试有效期不能少于考试时长！",type:"error"}):this.$http.post("/api/updateExamPaper",{courseID:this.courseID,examID:this.currentSettingExam.examID,startTime:this.currentSettingExam.startEndTime[0],endTime:this.currentSettingExam.startEndTime[1],examTiming:this.currentSettingExam.examTiming}).then((function(e){1===e.data.code&&t.$router.push({path:"/emptyPage"}),-1===e.data.code&&(t.$dialog.failed({title:"操作失败",content:"发生了错误导致操作失败",confirmText:"确定",onConfirm:function(){}}),console.log(e.data.errMsg))})).catch((function(t){console.log(t)}))},delExamPaper:function(t){var e=this;this.$confirm("此操作将删除该考试, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$http.post("/api/delExamPaper",{courseID:e.courseID,examID:t}).then((function(t){1===t.data.code&&e.$router.push({path:"/emptyPage"}),-1===t.data.code&&(e.$dialog.failed({title:"删除失败",content:"发生了错误导致删除失败",confirmText:"确定",onConfirm:function(){}}),console.log(t.data.errMsg))})).catch((function(t){console.log(t)}))})).catch((function(t){}))}},components:{Card:i["a"]}},o=s,c=(a("e8ce"),a("2877")),u=Object(c["a"])(o,n,r,!1,null,"698990ae",null);e["default"]=u.exports},"2d4b":function(t,e,a){},ae8d:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card",class:{"is-always-shadow":"always"===t.shadow,"is-hover-shadow":"hover"===t.shadow,border:t.border,round:t.round}},[t._t("default")],2)},r=[],i={props:{border:{type:Boolean,default:!1},round:{type:Boolean,default:!1},shadow:{type:String,default:"never"}}},s=i,o=(a("b86e"),a("2877")),c=Object(o["a"])(s,n,r,!1,null,"68c27dfd",null);e["a"]=c.exports},b86e:function(t,e,a){"use strict";var n=a("2d4b"),r=a.n(n);r.a},e8ce:function(t,e,a){"use strict";var n=a("1444"),r=a.n(n);r.a}}]);
//# sourceMappingURL=chunk-f9994d24.76e6704d.js.map