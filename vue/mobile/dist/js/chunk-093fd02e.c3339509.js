(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-093fd02e"],{"12db":function(t,e,i){},"401a":function(t,e,i){"use strict";var a=i("12db"),n=i.n(a);n.a},"74f7":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"article-detail"},[i("article",{staticClass:"article-main"},[i("h1",{staticClass:"article__title"},[t._v(t._s(t.article.title))]),i("div",{staticClass:"article__meta sub-font_sub"},[i("p",{staticClass:"article__author-avatar"},[i("img",{attrs:{src:t.article.avatarURL,alt:t.article.authorName}})]),i("div",{staticClass:"article__author-name-time"},[i("p",[t._v(t._s(t.article.authorName))]),i("div",{staticClass:"article__meta-detail"},[i("div",{staticClass:"article__created item_padding"},[t._v("\n            "+t._s(t.formatDate(t.article.created,t.dayjsNowTime))+"\n          ")]),i("span",{staticClass:"item_padding"},[t._v(t._s(t.article.views)+"次浏览   ·")]),i("span",{staticClass:"article__good-btn item_padding",on:{click:t.likesArticleHandler}},[i("md-icon",{attrs:{name:t.likesLoading?"spinner":"arrow-up",color:t.isLiked?"#409eff":"gray",size:"md"}}),t._v("\n            "+t._s(t.goodsCount)+"次点赞\n          ")],1)])])]),i("div",{staticClass:"article__content",domProps:{innerHTML:t._s(t.article.content)}})])])},n=[];function c(t,e,i){var a=i(t),n=e.diff(a),c=Math.ceil(n/1e3/60),r=Math.ceil(c/60),s=Math.ceil(r/24);return c>59?r>23?s>29?a.format("YYYY-MM-DD"):"".concat(s,"天前"):"".concat(r,"小时前"):"".concat(c,"分钟前")}var r=function(){var t=-1;return function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;t>0||(i=-1===t?0:i,t=setTimeout((function(){e(),t=0}),i))}}(),s={props:{user:{type:Object,default:{}}},data:function(){return{article:{},articleType:this.$route.query.articleType||"news",articleID:this.$route.params.article_id,isLiked:!1,replyContent:"",currentReply:"",dayjsNowTime:this.$dayjs(Date.now()),goodsCount:0,likesLoading:!1}},methods:{formatDate:function(t,e){return c(t,e,this.$dayjs)},checkIdentity:function(){return!!this.user.id||(this.$router.push({path:"/auth"}),!1)},getArticle:function(){var t=this,e="/api/getArticle";this.$http.post(e,{articleID:this.articleID,articleType:this.articleType}).then((function(e){1===e.data.code&&(t.article=e.data.data,t.goodsCount=t.article.goods.length,t.isLiked=t.article.isLiked)})).catch((function(t){console.error(t)}))},incViewsCount:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$http.post("/api/incViewsCount",{articleID:this.articleID,articleType:this.articleType}).then((function(e){t.article.views++,console.log(e)})).catch((function(t){console.error(t)}))},likesArticleHandler:function(){var t=this;if(!this.checkIdentity())return!1;this.likesLoading=!0,r((function(){var e=function(e){var i=1===e?"doLikes":"cancelLikes",a="/api/".concat(i);t.$http.post(a,{articleID:t.articleID,articleType:t.articleType,userID:t.user.id,userType:t.user.userType,userName:t.user.username}).then((function(i){t.goodsCount+=e})).catch((function(t){console.error(t)})).finally((function(e){t.likesLoading=!1}))};t.isLiked?e(-1):e(1),t.isLiked=!t.isLiked}))},handler:function(t){var e=t.currentTarget.dataset.index;this.currentReply!==e&&(this.replyContent="",this.currentReply=e)},updateComments:function(){var t=this;ArticleProvider.updateArticle({type:"comment",articleID:this.articleID}).then((function(e){1===e.data.code&&t.$message({})}))},updateReplys:function(){},starClickHandler:function(){}},computed:{},created:function(){this.getArticle(),this.incViewsCount()}},o=s,l=(i("401a"),i("2877")),u=Object(l["a"])(o,a,n,!1,null,"ded2b0bc",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-093fd02e.c3339509.js.map