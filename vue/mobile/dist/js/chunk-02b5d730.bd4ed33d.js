(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02b5d730"],{"1c51":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"course-detail",class:{"gray-bg":t.courseDetail.content&&t.courseDetail.content.length>0}},[a("div",{staticClass:"header"},[t.courseDetail?a("span",{staticClass:"course-name"},[t._v(t._s(t.courseDetail.coursename))]):t._e()]),a("div",{staticClass:"course-content"},t._l(t.courseDetail.content,(function(e){return a("Card",{key:e.id,attrs:{round:""}},[a("span",{staticClass:"ch-name"},[t._v(t._s(e.stamp))]),t._l(e.part,(function(o){return a("md-field-item",{key:o.id,attrs:{solid:"",arrow:""},on:{click:function(a){return t.$router.push({path:t.$route.path+"/pd?c="+e.id+"&p="+o.id})}}},[a("div",{attrs:{slot:"default"},slot:"default"},[t._v("\n          "+t._s(o.title)+" \n          "),a("md-tag",{directives:[{name:"show",rawName:"v-show",value:t.lastread[0]===e.id&&t.lastread[1]===o.id,expression:"lastread[0] === ch.id && lastread[1] === part.id"}],attrs:{shape:"fillet",type:"ghost","fill-color":"rgba(103,194,58,.1)","font-color":"#67c23a"}},[t._v("上次看到这")])],1)])}))],2)})),1),a("md-result-page",{directives:[{name:"show",rawName:"v-show",value:!t.courseDetail.content||0===t.courseDetail.content.length,expression:"!courseDetail.content || courseDetail.content.length === 0"}]})],1)},n=[],r=(a("ac6a"),a("ae8d")),s={data:function(){return{courseID:"",courseDetail:{},newChapter:{stamp:"",part:[]},addChapter:!1,lastread:[]}},props:{user:{type:Object,default:{}}},created:function(){this.courseID=this.$route.params.course_id,this.getCourseDetail()},methods:{getMaxPartID:function(t){var e=[];return t.forEach((function(t){e.push(t.id)})),0===e.length?-1:Math.max.apply(Math,e)},getMaxChapterID:function(){var t=[];return this.courseDetail.content.forEach((function(e){t.push(e.id)})),0===t.length?-1:Math.max.apply(Math,t)},getCourseDetail:function(){var t=this;this.$http.post("/api/getCourseDetail",{courseID:this.courseID}).then((function(e){if(1===e.data.code){t.courseDetail=e.data.data;var a=JSON.parse(window.localStorage.getItem("course.".concat(t.courseID,".").concat(t.user.id,".lastread.part")));a&&(t.lastread=a)}-1===e.data.code&&t.$toast.failed("加载失败")})).catch((function(t){console.log(t)}))},addChapterToCourse:function(){var t=this;this.$http.post("/api/addChapterToCourse",{courseID:this.courseID,tchID:this.courseDetail.tchID,newChapter:{id:this.getMaxChapterID()+1,stamp:this.newChapter.stamp,part:this.newChapter.part}}).then((function(e){1===e.data.code&&(t.addChapter=!1,t.$router.push({path:"/emptyPage"})),0===e.data.code&&t.$toast.failed(e.data.info),-1===e.data.code&&(t.$dialog.failed({title:"添加失败",content:"发生了错误导致章节添加失败",confirmText:"确定"}),console.log(e.data.errMsg))})).catch((function(t){console.log(t)}))},delCourse:function(){var t=this;this.$dialog.confirm({title:"提示",content:"此操作将删除该课程及其所有内容, 是否继续?",confirmText:"确定",onConfirm:function(){t.$http.post("/api/delCourse",{courseID:t.courseID,tchID:t.courseDetail.tchID}).then((function(e){1===e.data.code&&t.$router.push({path:"/emptyPage"}),0===e.data.code&&t.$toast.failed(e.data.info),-1===e.data.code&&(t.$dialog.failed({title:"删除失败",content:"发生了错误导致课程删除失败",confirmText:"确定"}),console.log(e.data.errMsg))})).catch((function(t){console.log(t)}))}})},delChapter:function(t){var e=this;this.$dialog.confirm({title:"提示",content:"此操作将删除该章节, 是否继续?",confirmText:"确定",onConfirm:function(){e.$http.post("/api/delChapter",{courseID:e.courseID,tchID:e.courseDetail.tchID,chapter:t}).then((function(t){1===t.data.code&&e.$router.push({path:"/emptyPage"}),0===t.data.code&&e.$toast.failed(t.data.info),-1===t.data.code&&(e.$dialog.failed({title:"删除失败",content:"发生了错误导致课程删除失败",confirmText:"确定"}),console.log(t.data.errMsg))})).catch((function(t){console.log(t)}))}})},delPart:function(t,e){var a=this;this.$dialog.confirm({title:"提示",content:"此操作将删除该单元, 是否继续?",confirmText:"确定",onConfirm:function(){a.$http.post("/api/delPart",{courseID:a.courseID,tchID:a.courseDetail.tchID,chapter:t,part:e}).then((function(t){1===t.data.code&&a.$router.push({path:"/emptyPage"}),0===t.data.code&&a.$toast.failed(t.data.info),-1===t.data.code&&(a.$dialog.failed({title:"删除失败",content:"发生了错误导致删除失败",confirmText:"确定"}),console.log(t.data.errMsg))})).catch((function(t){console.log(t)}))}})},handleAddChapterClose:function(){this.$refs.addChapter.resetFields(),this.addChapter=!1}},components:{Card:r["a"]}},c=s,i=(a("f2b1"),a("2877")),d=Object(i["a"])(c,o,n,!1,null,"6c08bb24",null);e["default"]=d.exports},"2d4b":function(t,e,a){},"4a06":function(t,e,a){},ae8d:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card",class:{"is-always-shadow":"always"===t.shadow,"is-hover-shadow":"hover"===t.shadow,border:t.border,round:t.round}},[t._t("default")],2)},n=[],r={props:{border:{type:Boolean,default:!1},round:{type:Boolean,default:!1},shadow:{type:String,default:"never"}}},s=r,c=(a("b86e"),a("2877")),i=Object(c["a"])(s,o,n,!1,null,"68c27dfd",null);e["a"]=i.exports},b86e:function(t,e,a){"use strict";var o=a("2d4b"),n=a.n(o);n.a},f2b1:function(t,e,a){"use strict";var o=a("4a06"),n=a.n(o);n.a}}]);
//# sourceMappingURL=chunk-02b5d730.bd4ed33d.js.map