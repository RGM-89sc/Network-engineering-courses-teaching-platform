(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7377f87c"],{"07e3":function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},"1bc3":function(t,e,r){var i=r("f772");t.exports=function(t,e){if(!i(t))return t;var r,a;if(e&&"function"==typeof(r=t.toString)&&!i(a=r.call(t)))return a;if("function"==typeof(r=t.valueOf)&&!i(a=r.call(t)))return a;if(!e&&"function"==typeof(r=t.toString)&&!i(a=r.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},"1ec9":function(t,e,r){var i=r("f772"),a=r("e53d").document,n=i(a)&&i(a.createElement);t.exports=function(t){return n?a.createElement(t):{}}},"294c":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"2fef":function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"auth"}},[r("div",{staticClass:"auth-header"},[r("md-icon",{attrs:{name:"close",size:"lg"},on:{"~click":function(e){return t.$router.go(-1)}}})],1),r(t.currentTab,{tag:"component",on:{login:t.updateLoginState,changeTab:t.changeTab}})],1)},a=[],n=function(){var t=this,e=this,r=e.$createElement,i=e._self._c||r;return i("div",[i("div",{staticClass:"login-logo"}),i("md-field",[i("md-input-item",{attrs:{type:"text",title:"学号/工号：",placeholder:"请输入学号/工号",autocomplete:"off",clearable:""},on:{change:e.checkID},model:{value:e.loginData.id,callback:function(t){e.$set(e.loginData,"id",t)},expression:"loginData.id"}},[e.isIDError?i("p",{attrs:{slot:"error"},slot:"error"},[e._v("请输入学号/工号！")]):e._e()]),i("md-input-item",{attrs:{type:"password",title:"密码：",placeholder:"请输入密码",autocomplete:"off",clearable:""},on:{change:e.checkPW},model:{value:e.loginData.password,callback:function(t){e.$set(e.loginData,"password",t)},expression:"loginData.password"}},[e.isPWError?i("p",{attrs:{slot:"error"},slot:"error"},[e._v("请输入密码！")]):e._e()]),i("md-field-item",{attrs:{title:"我是：",content:0===e.loginData.userType?"学生":1===e.loginData.userType?"教师":"",placeholder:"请选择",arrow:"",solid:""},on:{click:function(t){e.isSelectorShow=!0}}}),i("div",{staticClass:"login"},[i("md-button",{attrs:{type:"primary",icon:e.submiting?"spinner":"",round:""},on:{click:e.submitForm}},[e._v(e._s(e.submiting?"登 录 中":"登 录"))])],1),i("div",{staticClass:"register"},[i("span",{on:{click:function(t){return e.$emit("changeTab","Register")}}},[e._v("还没有账号？马上注册")])])],1),i("md-selector",{attrs:{data:[{value:"0",text:"学生"},{value:"1",text:"教师"}],"max-height":"320px",title:"我是"},on:{choose:function(e){var r=e.value;e.text;t.loginData.userType=parseInt(r)}},model:{value:e.isSelectorShow,callback:function(t){e.isSelectorShow=t},expression:"isSelectorShow"}})],1)},s=[],o={name:"login",data:function(){return{userType:0,loginData:{id:"",password:"",userType:""},isSelectorShow:!1,isIDOK:!1,isIDError:!1,isPWOK:!1,isPWError:!1,submiting:!1}},props:{title:{type:String}},methods:{checkPW:function(t,e){""===e?(this.isPWOK=!1,this.isPWError=!0):(this.isPWOK=!0,this.isPWError=!1)},checkID:function(t,e){""===e?(this.isIDOK=!1,this.isIDError=!0):(this.isIDOK=!0,this.isIDError=!1)},submitForm:function(){var t,e=this;return this.isIDOK&&this.isPWOK?0!==this.loginData.userType&&1!==this.loginData.userType?(this.$toast.failed("请选择您的身份"),!1):(this.submiting=!0,t=0===this.loginData.userType?"/api/stuLogin":"/api/tchLogin",void this.$http.post(t,{id:this.loginData.id,password:this.loginData.password,userType:this.loginData.userType}).then((function(t){1===t.data.code&&(e.$emit("login",e.$getLoginState()),e.$router.push({path:"/"})),0===t.data.code&&e.$toast.failed(t.data.info),-1===t.data.code&&e.$toast.failed(t.data.errMsg)})).catch((function(t){console.log(t)})).finally((function(){e.submiting=!1}))):(this.checkID(null,this.loginData.id),this.checkPW(null,this.loginData.password),!1)}}},c=o,u=(r("3183"),r("2877")),l=Object(u["a"])(c,n,s,!1,null,"e4beff9c",null),f=l.exports,h=function(){var t=this,e=this,r=e.$createElement,i=e._self._c||r;return i("div",[i("md-field",[i("md-input-item",{attrs:{type:"text",title:"学号/工号：",placeholder:"请输入学号/工号",autocomplete:"off",clearable:""},on:{change:e.checkID},model:{value:e.registerData.id,callback:function(t){e.$set(e.registerData,"id",t)},expression:"registerData.id"}},[e.isIDError?i("p",{attrs:{slot:"error"},slot:"error"},[e._v("请输入学号/工号！")]):e._e()]),i("md-input-item",{attrs:{type:"text",title:"姓名：",placeholder:"请输入姓名",autocomplete:"off",clearable:""},on:{change:e.checkUsername},model:{value:e.registerData.username,callback:function(t){e.$set(e.registerData,"username",t)},expression:"registerData.username"}},[e.isUsernameError?i("p",{attrs:{slot:"error"},slot:"error"},[e._v("请输入姓名！")]):e._e()]),i("md-input-item",{attrs:{type:"password",title:"密码：",placeholder:"请输入密码",autocomplete:"off",clearable:""},on:{change:e.checkPW},model:{value:e.registerData.password,callback:function(t){e.$set(e.registerData,"password",t)},expression:"registerData.password"}},[e.isPWError?i("p",{attrs:{slot:"error"},slot:"error"},[e._v("密码应至少6个字符且不多于16个字符！")]):e._e()]),i("md-field-item",{attrs:{title:"我是：",content:0===e.registerData.userType?"学生":1===e.registerData.userType?"教师":"",placeholder:"请选择",arrow:"",solid:""},on:{click:function(t){e.isUserTypeSelectorShow=!0}}}),i("md-field-item",{attrs:{title:"学院/系：",arrow:"arrow-right",addon:e.registerData.faculty||"请选择"},on:{click:function(t){e.isFacultyPickerShow=!0}}}),0===e.registerData.userType?i("div",[i("md-field-item",{attrs:{title:"年级：",arrow:"arrow-right",addon:e.registerData.grade||"请选择"},on:{click:function(t){e.isGradePickerShow=!0}}}),i("md-field-item",{attrs:{title:"专业：",arrow:"arrow-right",addon:e.registerData.major||"请选择"},on:{click:function(t){e.isMajorPickerShow=!0}}}),i("md-field-item",{attrs:{title:"班级：",arrow:"arrow-right",addon:e.registerData.sclass||"请选择"},on:{click:function(t){e.isSclassPickerShow=!0}}})],1):e._e(),i("div",{staticClass:"register"},[i("md-button",{attrs:{type:"primary",icon:e.submiting?"spinner":"",round:""},on:{click:e.submitForm}},[e._v(e._s(e.submiting?"请 稍 后":"注册并登录"))])],1),i("div",{staticClass:"login"},[i("span",{on:{click:function(t){return e.$emit("changeTab","Login")}}},[e._v("已有账号？马上登录")])])],1),i("md-selector",{attrs:{data:[{value:"0",text:"学生"},{value:"1",text:"教师"}],"max-height":"320px",title:"我是"},on:{choose:function(e){var r=e.value;e.text;t.registerData.userType=parseInt(r)}},model:{value:e.isUserTypeSelectorShow,callback:function(t){e.isUserTypeSelectorShow=t},expression:"isUserTypeSelectorShow"}}),i("md-picker",{ref:"faculty",attrs:{data:e.facultyData,title:"学院/系"},on:{confirm:function(t){return e.onPickerConfirm("faculty")}},model:{value:e.isFacultyPickerShow,callback:function(t){e.isFacultyPickerShow=t},expression:"isFacultyPickerShow"}}),0===e.registerData.userType?i("div",[i("md-picker",{ref:"grade",attrs:{data:e.gradeData,title:"年级"},on:{confirm:function(t){return e.onPickerConfirm("grade")}},model:{value:e.isGradePickerShow,callback:function(t){e.isGradePickerShow=t},expression:"isGradePickerShow"}}),i("md-picker",{ref:"major",attrs:{data:e.majorData,title:"专业"},on:{confirm:function(t){return e.onPickerConfirm("major")}},model:{value:e.isMajorPickerShow,callback:function(t){e.isMajorPickerShow=t},expression:"isMajorPickerShow"}}),i("md-picker",{ref:"sclass",attrs:{data:e.sclassData,title:"班级"},on:{confirm:function(t){return e.onPickerConfirm("sclass")}},model:{value:e.isSclassPickerShow,callback:function(t){e.isSclassPickerShow=t},expression:"isSclassPickerShow"}})],1):e._e()],1)},d=[],p=(r("a481"),r("456d"),r("ac6a"),r("85f2")),g=r.n(p);function m(t,e,r){return e in t?g()(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var D={name:"register",data:function(){return{registerData:{id:"",username:"",password:"",userType:"",faculty:"",major:"",grade:"",sclass:""},gradeData:[[]],faculty:m({},"计算机工程学院",m({},"网络工程",[1,2])),facultyData:[],majorData:[],sclassData:[],isUserTypeSelectorShow:!1,isFacultyPickerShow:!1,isGradePickerShow:!1,isMajorPickerShow:!1,isSclassPickerShow:!1,isIDError:!1,isIDOK:!1,isUsernameError:!1,isUsernameOK:!1,isPWError:!1,isPWOK:!1,submiting:!1}},created:function(){var t=[];Object.keys(this.faculty).forEach((function(e){t.push({value:e,text:e})})),this.facultyData.push(t);for(var e=1;e<=5;e++){var r=new Date,i="";r.getMonth()>8?(i=r.getFullYear()+"",this.gradeData[0].push({value:i,text:i})):(i=r.getFullYear()-e+"",this.gradeData[0].push({value:i,text:i}))}},watch:{"registerData.userType":function(){1===this.registerData.userType&&(this.registerData.major="",this.registerData.sclass="",this.registerData.grade="")},"registerData.faculty":function(){this.registerData.major="";var t=[],e=this.registerData.faculty.replace(" ","");Object.keys(this.faculty[e]).forEach((function(e){t.push({value:e,text:e})})),this.majorData.push(t)},"registerData.major":function(){this.registerData.sclass="";var t=[],e=this.registerData.faculty.replace(" ",""),r=this.registerData.major.replace(" ",""),i=this.faculty[e][r];i&&i.length>0&&i.forEach((function(e){t.push({value:e+"",text:e+""})})),this.sclassData.push(t)}},methods:{checkID:function(t,e){""===e?(this.isIDOK=!1,this.isIDError=!0):(this.isIDOK=!0,this.isIDError=!1)},checkUsername:function(t,e){""===e?(this.isUsernameOK=!1,this.isUsernameError=!0):(this.isUsernameOK=!0,this.isUsernameError=!1)},checkPW:function(t,e){e.length<6||e.length>16?(this.isPWOK=!1,this.isPWError=!0):(this.isPWOK=!0,this.isPWError=!1)},onPickerConfirm:function(t){var e=this.$refs["".concat(t)].getColumnValues(),r="";e.forEach((function(t){t&&(r+="".concat(t.text||t.label," "))})),this.registerData["".concat(t)]=r},login:function(){var t,e=this;t=0===this.registerData.userType?"/api/stuLogin":"/api/tchLogin",this.$http.post(t,{id:this.registerData.id,password:this.registerData.password,userType:this.registerData.userType}).then((function(t){1===t.data.code&&(e.$emit("login",e.$getLoginState()),e.$router.push({path:"/"})),0===t.data.code&&e.$toast.failed(t.data.info),-1===t.data.code&&e.$toast.failed(t.data.errMsg)})).catch((function(t){console.log(t)}))},checkForm:function(){if(!this.isIDOK||!this.isPWOK||!this.isUsernameOK)return this.checkID(null,this.registerData.id),this.checkUsername(null,this.registerData.username),this.checkPW(null,this.registerData.password),!1;if(0!==this.registerData.userType&&1!==this.registerData.userType)return this.$toast.failed("请选择您的身份"),!1;if(!this.registerData.faculty)return this.$toast.failed("请选择您所属学院"),!1;if(0===this.registerData.userType){if(""===this.registerData.grade)return this.$toast.failed("请选择您的年级"),!1;if(!this.registerData.major)return this.$toast.failed("请选择您所在专业"),!1;if(!this.registerData.sclass)return this.$toast.failed("请选择您所在班级"),!1}return!0},submitForm:function(){var t,e=this;if(!this.checkForm())return!1;this.submiting=!0,t=0===this.registerData.userType?"/api/stuRegister":"/api/tchRegister",this.$http.post(t,this.registerData).then((function(t){1===t.data.code&&e.login(),0===t.data.code&&e.$toast.failed(t.data.info),-1===t.data.code&&e.$toast.failed(t.data.errMsg)})).catch((function(t){console.log(t)})).finally((function(){e.submiting=!1}))}}},v=D,y=(r("7ca1"),Object(u["a"])(v,h,d,!1,null,"7660900e",null)),b=y.exports,w={name:"auth",data:function(){return{currentTab:"Login"}},computed:{currentTabTitle:function(){return"Login"===this.currentTab?"登录":"注册"}},created:function(){this.$getLoginState()||this.$emit("update:user",{})},methods:{changeTab:function(t){this.currentTab=t},updateLoginState:function(t){this.$emit("login",t)}},components:{Login:f,Register:b}},k=w,S=(r("42b4"),Object(u["a"])(k,i,a,!1,null,"2fdd8282",null));e["default"]=S.exports},3183:function(t,e,r){"use strict";var i=r("f3bd"),a=r.n(i);a.a},"35e8":function(t,e,r){var i=r("d9f6"),a=r("aebd");t.exports=r("8e60")?function(t,e,r){return i.f(t,e,a(1,r))}:function(t,e,r){return t[e]=r,t}},"42b4":function(t,e,r){"use strict";var i=r("7b64"),a=r.n(i);a.a},"454f":function(t,e,r){r("46a7");var i=r("584a").Object;t.exports=function(t,e,r){return i.defineProperty(t,e,r)}},"456d":function(t,e,r){var i=r("4bf8"),a=r("0d58");r("5eda")("keys",(function(){return function(t){return a(i(t))}}))},"46a7":function(t,e,r){var i=r("63b6");i(i.S+i.F*!r("8e60"),"Object",{defineProperty:r("d9f6").f})},"584a":function(t,e){var r=t.exports={version:"2.6.10"};"number"==typeof __e&&(__e=r)},"5e5a":function(t,e,r){},"5eda":function(t,e,r){var i=r("5ca1"),a=r("8378"),n=r("79e5");t.exports=function(t,e){var r=(a.Object||{})[t]||Object[t],s={};s[t]=e(r),i(i.S+i.F*n((function(){r(1)})),"Object",s)}},"63b6":function(t,e,r){var i=r("e53d"),a=r("584a"),n=r("d864"),s=r("35e8"),o=r("07e3"),c="prototype",u=function(t,e,r){var l,f,h,d=t&u.F,p=t&u.G,g=t&u.S,m=t&u.P,D=t&u.B,v=t&u.W,y=p?a:a[e]||(a[e]={}),b=y[c],w=p?i:g?i[e]:(i[e]||{})[c];for(l in p&&(r=e),r)f=!d&&w&&void 0!==w[l],f&&o(y,l)||(h=f?w[l]:r[l],y[l]=p&&"function"!=typeof w[l]?r[l]:D&&f?n(h,i):v&&w[l]==h?function(t){var e=function(e,r,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,i)}return t.apply(this,arguments)};return e[c]=t[c],e}(h):m&&"function"==typeof h?n(Function.call,h):h,m&&((y.virtual||(y.virtual={}))[l]=h,t&u.R&&b&&!b[l]&&s(b,l,h)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},"794b":function(t,e,r){t.exports=!r("8e60")&&!r("294c")((function(){return 7!=Object.defineProperty(r("1ec9")("div"),"a",{get:function(){return 7}}).a}))},"79aa":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},"7b64":function(t,e,r){},"7ca1":function(t,e,r){"use strict";var i=r("5e5a"),a=r.n(i);a.a},"85f2":function(t,e,r){t.exports=r("454f")},"8e60":function(t,e,r){t.exports=!r("294c")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},aebd:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},d864:function(t,e,r){var i=r("79aa");t.exports=function(t,e,r){if(i(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,i){return t.call(e,r,i)};case 3:return function(r,i,a){return t.call(e,r,i,a)}}return function(){return t.apply(e,arguments)}}},d9f6:function(t,e,r){var i=r("e4ae"),a=r("794b"),n=r("1bc3"),s=Object.defineProperty;e.f=r("8e60")?Object.defineProperty:function(t,e,r){if(i(t),e=n(e,!0),i(r),a)try{return s(t,e,r)}catch(o){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},e4ae:function(t,e,r){var i=r("f772");t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},e53d:function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},f3bd:function(t,e,r){},f772:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}}}]);
//# sourceMappingURL=chunk-7377f87c.e52d1652.js.map