{"version":3,"sources":["webpack:///./src/views/childrenViews/PreviewCourseware.vue?10fb","webpack:///src/views/childrenViews/PreviewCourseware.vue","webpack:///./src/views/childrenViews/PreviewCourseware.vue?b3f2","webpack:///./src/views/childrenViews/PreviewCourseware.vue","webpack:///./src/views/childrenViews/PreviewCourseware.vue?6f99"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","$route","params","filename","directives","name","rawName","value","expression","style","pdfLoaded","_l","i","key","ref","refInFor","staticStyle","src","on","$event","pageLoaded","pdfError","staticRenderFns","data","loading","currentPage","pageCount","progress","currentOffset","isDrawing","canvas","context","canvasOffset","canDraw","penColor","penThickness","created","then","props","user","type","Object","default","methods","parseInt","setTimeout","console","log","err","components","Card","pdf","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,OAAO,CAACG,MAAM,CAAC,MAAQ,KAAK,CAACH,EAAG,OAAO,CAACE,YAAY,SAAS,CAACN,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIU,OAAOC,OAAOC,aAAaR,EAAG,wBAAwB,CAACS,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOhB,EAAW,QAAEiB,WAAW,YAAYX,YAAY,UAAUC,MAAM,CAAC,KAAO,GAAG,YAAY,GAAG,SAAW,KAAK,CAACP,EAAIQ,GAAG,kBAAkBJ,EAAG,MAAM,CAACE,YAAY,aAAaY,MAAM,CAAG,WAAclB,EAAImB,UAAY,UAAY,SAAU,UAAc,eAAiBnB,EAAImB,UAAY,IAAM,SAAW,MAAS,CAACf,EAAG,MAAM,CAACE,YAAY,YAAYN,EAAIoB,GAAIpB,EAAa,WAAE,SAASqB,GAAG,OAAOjB,EAAG,MAAM,CAACkB,IAAID,EAAEE,IAAI,MAAMC,UAAS,EAAKlB,YAAY,WAAWmB,YAAY,CAAC,mBAAmB,QAAQlB,MAAM,CAAC,IAAMP,EAAI0B,IAAI,KAAOL,GAAGM,GAAG,CAAC,cAAc,SAASC,GAAQ,OAAO5B,EAAI6B,WAAWR,IAAI,MAAQrB,EAAI8B,eAAc,MAAM,IAAI,IAC15BC,EAAkB,G,wBC8BtB,GACEC,KADF,WAEI,MAAO,CACLN,IAAK,EAAX,iCACA,oBADA,8BAEA,8BAGMO,SAAS,EACTC,YAAa,EACbC,UAAW,EACXC,SAAU,EACVjB,WAAW,EACXkB,cAAe,EAEfC,WAAW,EACXC,OAAQ,KACRC,QAAS,KACTC,aAAc,GACdC,SAAS,EACTC,SAAU,OACVC,aAAc,IAGlBC,QAxBF,WAwBA,WACI5C,KAAKgC,SAAU,EAEfhC,KAAKyB,IAAIoB,MAAK,SAAlB,GACM,EAAN,yBAGEC,MAAO,CACLC,KAAM,CACJC,KAAMC,OACNC,QAAS,KAGbC,QAAS,CACPvB,WADJ,SACA,cACM5B,KAAKmC,SAAWiB,SAAS,EAA/B,qBAC6B,IAAnBpD,KAAKkB,WAAyC,MAAlBlB,KAAKmC,UACnCkB,YAAW,WACT,EAAV,aACU,EAAV,sBACY,EAAZ,gBAEA,qBAGIxB,SAZJ,SAYA,GACMyB,QAAQC,IAAIC,KAGhBC,WAAY,CACVC,KAAJ,OACIC,IAAJ,SCtF0W,I,wBCQtWC,EAAY,eACd,EACA9D,EACAgC,GACA,EACA,KACA,WACA,MAIa,aAAA8B,E,oECnBf,yBAAgkB,EAAG","file":"js/chunk-096abbf8.46aebdbd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"gray-bg\"},[_c('Card',{attrs:{\"round\":\"\"}},[_c('span',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.$route.params.filename))]),_c('md-activity-indicator',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"loading\",attrs:{\"size\":25,\"text-size\":16,\"vertical\":\"\"}},[_vm._v(\"正在绘制图像，请耐心等待\")]),_c('div',{staticClass:\"pdf-viewer\",style:({ 'visibility': _vm.pdfLoaded ? 'visible' : 'hidden', 'transform': (\"translateY(\" + (_vm.pdfLoaded ? '0' : '-200%') + \")\") })},[_c('div',{staticClass:\"pdf-main\"},_vm._l((_vm.pageCount),function(i){return _c('pdf',{key:i,ref:\"pdf\",refInFor:true,staticClass:\"pdf-page\",staticStyle:{\"background-color\":\"#eee\"},attrs:{\"src\":_vm.src,\"page\":i},on:{\"page-loaded\":function($event){return _vm.pageLoaded(i)},\"error\":_vm.pdfError}})}),1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"gray-bg\">\r\n    <Card round>\r\n      <span class=\"title\">{{$route.params.filename}}</span>\r\n      <md-activity-indicator class=\"loading\" :size=\"25\" :text-size=\"16\" vertical v-show=\"loading\">正在绘制图像，请耐心等待</md-activity-indicator>\r\n      <div\r\n        class=\"pdf-viewer\"\r\n        :style=\"{ 'visibility': pdfLoaded ? 'visible' : 'hidden', 'transform': `translateY(${pdfLoaded ? '0' : '-200%'})` }\"\r\n      >\r\n        <div class=\"pdf-main\">\r\n          <pdf\r\n            class=\"pdf-page\"\r\n            ref=\"pdf\"\r\n            v-for=\"i in pageCount\"\r\n            :key=\"i\"\r\n            :src=\"src\"\r\n            :page=\"i\"\r\n            style=\"background-color: #eee;\"\r\n            @page-loaded=\"pageLoaded(i)\"\r\n            @error=\"pdfError\"\r\n          ></pdf>\r\n        </div>\r\n      </div>\r\n    </Card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Card from '../../components/Card';\r\nimport pdf from 'vue-pdf';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      src: pdf.createLoadingTask(\r\n        `${this.$serverBaseUrl}/static/courseware/${\r\n          this.$route.params.filename\r\n        }`\r\n      ),\r\n      loading: true,\r\n      currentPage: 1,\r\n      pageCount: 0,\r\n      progress: 0,\r\n      pdfLoaded: false,\r\n      currentOffset: 1,\r\n\r\n      isDrawing: false,\r\n      canvas: null,\r\n      context: null,\r\n      canvasOffset: {},\r\n      canDraw: false,\r\n      penColor: '#000',\r\n      penThickness: 1\r\n    };\r\n  },\r\n  created() {\r\n    this.loading = true;\r\n\r\n    this.src.then(pdf => {\r\n      this.pageCount = pdf.numPages;\r\n    });\r\n  },\r\n  props: {\r\n    user: {\r\n      type: Object,\r\n      default: {}\r\n    }\r\n  },\r\n  methods: {\r\n    pageLoaded(pageNum) {\r\n      this.progress = parseInt((pageNum / this.pageCount) * 100);\r\n      if (this.pdfLoaded === false && this.progress === 100) {\r\n        setTimeout(() => {\r\n          this.pdfLoaded = true;\r\n          this.$nextTick(() => {\r\n            this.loading = false;\r\n          });\r\n        }, 200 * this.pageCount);\r\n      }\r\n    },\r\n    pdfError(err) {\r\n      console.log(err);\r\n    }\r\n  },\r\n  components: {\r\n    Card,\r\n    pdf\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.title {\r\n  display: block;\r\n  padding: 1rem;\r\n  text-align: center;\r\n}\r\n\r\n.loading {\r\n  margin-top: 2rem;\r\n}\r\n\r\n.pdf-page {\r\n  margin-bottom: 1rem;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreviewCourseware.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreviewCourseware.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PreviewCourseware.vue?vue&type=template&id=0ef3c794&scoped=true&\"\nimport script from \"./PreviewCourseware.vue?vue&type=script&lang=js&\"\nexport * from \"./PreviewCourseware.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PreviewCourseware.vue?vue&type=style&index=0&id=0ef3c794&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0ef3c794\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreviewCourseware.vue?vue&type=style&index=0&id=0ef3c794&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreviewCourseware.vue?vue&type=style&index=0&id=0ef3c794&lang=scss&scoped=true&\""],"sourceRoot":""}